<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <title>IoT map <!-- ignore --></title>
<head>
<script src="../map_v1.js"></script>
<link rel="stylesheet" type="text/css" href="../map_v1.css" />
</head>

<body>

<table>
<tr>

<td TODO>
  <a href="https://www.zigbee.org/">Zigbee.org</a>
<pre xxxsmall zoom>
- IEEE 802.15.4-based specification for a suite
  of high-level communication protocols used to 
  create personal area networks with small,
  low-power digital radios,
  such as for home automation, ...
</pre>

Who-is-Who:
<pre xxxsmall zoom>
<a href="https://www.qualcomm.com/news/onq/2018/12/05/developer-month-marco-santarcangelo-zazzetta-wehaus">Marco Santarcangelo</a>
</pre>
</td>
<td TODO>
5G/LTE,
</td>
<td TODO>
  <a href="https://en.wikipedia.org/wiki/Narrowband">Narrow-band</a>
<pre xxxsmall zoom>
In radio, narrowband describes a channel in which the bandwidth of the 
message does not significantly exceed the channel's coherence bandwidth.

In the study of wired channels, narrowband implies that the channel under 
consideration is sufficiently narrow that its frequency response can be 
considered flat. The message bandwidth will therefore be less than the 
coherence bandwidth of the channel. That is, no channel has perfectly flat 
fading, but the analysis of many aspects of wireless systems is greatly 
simplified if flat fading can be assumed.

Narrowband can also be used with the audio spectrum to describe sounds which 
occupy a narrow range of frequencies.

In telephony, narrowband is usually considered to cover frequencies 300–3400 Hz. 
</pre>
</td>
<td TODO>
  <a href="https://www.sigfox.com/en">Sigfox</a><br/>
  Global Low Power Wide Area network
<pre xxxsmall zoom>
- Sigfox Global Low Power Wide Area Network drastically brings down cost
  and energy consumption required for securely connecting IoT sensors 
  to the Cloud. 
- With its simple approach to connectivity, Sigfox provides extremely price-
  competitive connectivity subscriptions and even more importantly, enables 
  extremely simple and cost-efficient silicon modules.
</pre>
</td>
<td TODO>
  <a href="https://en.wikipedia.org/wiki/Z-Wave">Z-Wave</a>
<pre xxxsmall zoom>
- Z-Wave is a wireless communications protocol used primarily for home 
  automation. It is a mesh network using low-energy radio waves to communicate 
  from appliance to appliance, allowing for wireless control of residential 
  appliances and other devices, such as lighting control, security systems, 
  thermostats, windows, locks, swimming pools and garage door openers. 
  Like other protocols and systems aimed at the home and office automation 
  market, a Z-Wave automation system can be controlled from a wireless keyfob, 
  a wall-mounted keypad or through smartphones, tablets or computers, with a Z-
  Wave gateway or central control device serving as both the hub controller and 
  portal to the outside. It provides interoperability between home 
  control systems of different manufacturers that are a part of its alliance. 
  There are a growing number of interoperable Z-Wave products; over 1,700 in 
  2017, and over 2,400 by 2018. 
</pre>

</td>
</tr>
</table>
<table>
<tr>
<td>
<a href="https://azure.microsoft.com/en-us/services/azure-sphere/">Azure Sphere</a>

<pre xxxsmall zoom>
<a href="http://linuxgizmos.com/how-azure-sphere-ensures-iot-security-within-a-4mb-linux-stack/">How Azure Sphere ensures IoT security within a 4MB Linux stack(Sep 26, 2018)
</a>
 - Azure Sphere also includes a proprietary crypto/secure boot
   stack called the Microsoft Pluton Security Subsystem, which runs 
   on an MCU, as well an Azure Sphere Security Service, a turnkey
   cloud service for secure device-to-device and device-to-cloud communication.

 - The Azure Sphere MT3620 Development Kit features MediaTek’s MT3620,
    a 500MHz Cortex-A7/Cortex-M4F hybrid SoC that runs the lightweight Azure
    Sphere OS on a single -A7 core.

- Custom Linux Security Module, which coordinates with Cortex-M4's 
  proprietary Pluton security code using a mailbox-based protocol.

- Azure Sphere OS sits on top of the MCU’s Pluton stack, a 
  security stack based on Arm TrustZone. This is followed by the custom 
  Linux kernel, which in turn is topped by a cloud services update
  connectivity layer. 
- The top level is for POSIX and real-time I/O app containers.

- custom kernel based on mainline Linux 4.9. 

MAJOR SHRINKAGE:
- "avoid putting text into memory": lot on Execute-In-Place (XiP),
   """XiP lets you take a flash region and map it into the
      address space in read only, but also in a mode where 
      you can execute it as code."""

- """we tuned the kernel to make things modular so we could 
     turn things off""" ... cache sizes and patched to tweak default sizes

- turned off lot of the memory tracking options and things like kallsyms.
- cut sysfs, which saved almost 1MB.
- In the end, much of the kernel space was taken up by the
  network stack and hardware drivers.

SECURITY:
- Stripped-down version of the Linux Security Model (LSM)
  ""There's no shell or user account management,
     which really isn’t relevant for an IoT device and 
     there's no sophisticated job and process management."""

- Fairfax also added fields that created an app identity
  for every task. "Applications and kernel modules can
  use these new fields for extended access control" 
  - "Values are immutable — once set, they inherit by default."


- Linux treats the entire GPIO infrastructure as a single resource
  said Fairfax. "In the real world not everything connected to your 
  chip has the same sensitivity. I might have one GPIO pin that
  toggles an LED saying I'm connected to the network, which is
  not super sensitive, but another GPIO might open the solenoid 
  on my furnace to start gas flow, which is more worrisome."
  To compensate, the team added access control to existing 
  features like GPIO to provide more granular access control.

- Each application has metadata in the file system that says:
  "Here's how to run me and here’s what I need".
  By default, all you get is compute and RAM — even network
  access must be declared as part of the manifest. 

File System:
- ...They tried the read-only cramfs with XIP patches,
  as well as writable file systems like ext2, jfffs, and yaffs,
  but "they all took hundreds of kilobytes to initialize, or
  about 1/16th of the total system memory available.":j
  In the end, they ported the ultra-lightweight littlefs
  from Arm’s Mbed OS to Linux as a VFS module.

USER AND APPLICATION MODEL:
- custom init that calls the application manager that
  loads apps, configures their security environments, 
  and launches them. 
  """It's the only traditional process that runs on 
    our system — everything else is part of an application."""

- Azure Sphere applications are self describing and independently
  updatable. In fact, "they're actually their own independent file systems,"
  "They run isolated from each other and cannot access any resource from another app."

- There are initially four pre-loaded system applications:
  - network management
  - updates
  - command and control via USB
  - hardware crypto and RNG acceleration
- GDBServer is optional
- OEMs can "add one or two apps that contain their own business logic"

UPDATE POLICY:
- "everything is OTA updatable and everything is renewable"
- aiming for OTA security patch updates within 24 hours of public disclosure
- Microsoft will manage all the OS updates, OEMs control their own app updates.

- Future plans call for revisiting namespaces to create
  "something like a container" and there’s a plan to
  "reduce cap_sys_admin or make it more granular"

- Also planned to explore integrating parts of
  SELinux or AppArmor.
</pre>
</td>

<td>
<a href="https://www.tinkerforge.com/en/doc/Primer.html#primer-bricklets">Bricklets</a><br/>
(prebuilt IoT)
<pre xxxsmall zoom>
Name                        Description
Accelerometer               Measures acceleration in three axis
Air Quality                 Measures IAQ index, temperature, humidity and air pressure
Ambient Light 2.0           Measures ambient light up to 64000lux
Analog In 3.0               Measures DC voltage between 0V and 42V
Analog Out 2.0              Generates configurable DC voltage between 0V and 12V
Analog Out 3.0              Generates configurable DC voltage between 0V and 12V
Barometer                   Measures air pressure and altitude changes
Barometer 2.0               Measures air pressure and altitude changes
Breakout                    Makes all Bricklet signals available
CAN                         Communicates with CAN bus devices
CAN 2.0                     Communicates with CAN bus devices
CO2                         Measures CO2 concentration in ppm
Color                       Measures color (RGB value), illuminance and color temperature
Distance IR                 Measures distance up to 150cm with infrared light
Distance IR 2.0             Measures distance up to 150cm with infrared light
DMX                         DMX master and slave
Dual Button                 Two tactile buttons with built-in blue LEDs
Dual Button 2.0             Two tactile buttons with built-in blue LEDs
Dual Relay                  Two relays to switch AC/DC devices
Dust Detector               Measures dust density
GPS 2.0                     Determine position, velocity and altitude using GPS
Hall Effect                 Detects presence of magnetic field
Humidity 2.0                Measures relative humidity
Industrial Analog Out       Generates configurable DC voltage and current, 0V to 10V and 4mA to 20mA
Industrial Analog Out 2.0   Generates configurable DC voltage and current, 0V to 10V and 4mA to 20mA
Industrial Counter          4 channel counter up to 4MHz
Industrial Digital In 4 2.0 4 galvanically isolated digital inputs
Industrial Digital Out 4    4 galvanically isolated digital outputs
Industrial Digital Out 4 2. 4 galvanically isolated digital outputs
Industrial Dual 0-20mA      Measures two DC currents between 0mA and 20mA (IEC 60381-1)
Industrial Dual 0-20mA 2.0  Measures two DC currents between 0mA and 20mA (IEC 60381-1)
Industrial Dual Analog In   Measures two DC voltages between -35V and +35V with 24bit resolution each
Industrial Dual Analog In 2.Measures two DC voltages between -35V and +35V with 24bit resolution each
Industrial Dual Relay                                     Two relays to switch AC/DC devices
Industrial Quad Relay 2.0   4 galvanically isolated solid state relays
IO-16                       16-channel digital input/output
IO-16 2.0                   16-channel digital input/output
IO-4 2.0                    4-channel digital input/output
Isolator                    Galvanically isolates any Bricklet from any Brick
Joystick                    2-axis joystick with push-button
Laser Range Finder          Measures distance up to 40m with laser light
LCD 128x64                  7.1cm (2.8inch) display with 128x64 pixel and touch screen
LCD 20x4                    20x4 character alphanumeric display with blue backlight
LED Strip 2.0               Controls up to 2048 RGB(W) LEDs
Line                        Measures reflectivity of a surface
Linear Poti                 59mm linear potentiometer
Load Cell 2.0               Measures weight with a load cell
Moisture                    Measures soil moisture
Motion Detector             Passive infrared (PIR) motion sensor, 7m range
Motion Detector 2.0         Passive infrared (PIR) motion sensor, 12m range
Motorized Linear Poti       Motorized Linear Potentiometer
Multi Touch                 Capacitive touch sensor for 12 electrodes
NFC                         NFC tag read/write, NFC P2P and Card Emulation
OLED 128x64                 3.3cm (1.3inch) OLED display with 128x64 pixels
OLED 128x64 2.0             3.3cm (1.3inch) OLED display with 128x64 pixels
OLED 64x48                  1.68cm (0.66inch) OLED display with 64x48 pixels
One Wire                    Communicates with up 64 1-Wire devices
Outdoor Weather             433MHz receiver for outdoor weather station
Particulate Matter          Measures Particulate Matter concentration (PM1.0, PM2.5 and PM10)
Piezo Speaker               Creates beep with configurable frequency
PTC 2.0                     Reads temperatures from Pt100 und Pt1000 sensors
Real-Time Clock             Battery-backed real-time clock
Real-Time Clock 2.0         Battery-backed real-time clock
Remote Switch 2.0           Controls remote mains switches
RGB LED                     Controls one RGB LED
RGB LED Button              Push button with built-in RGB LED
Rotary Encoder 2.0          360° rotary encoder with push-button
Rotary Poti                 300° rotary potentiometer
RS232                       Communicates with RS232 devices
RS232 2.0                   Communicates with RS232 devices
RS485                       Communicates with RS485/Modbus devices with full- or half-duplex
Segment Display 4x7         Four 7-segment displays with switchable colon
Solid State Relay           Controls AC and DC Solid State Relays
Solid State Relay 2.0       Controls AC and DC Solid State Relays
Sound Intensity             Measures sound intensity
Sound Pressure Level        Measures Sound Pressure Level in dB(A/B/C/D/Z)
Temperature                 Measures ambient temperature with 0.5°C accuracy
Temperature 2.0             Measures ambient temperature with 0.2°C accuracy
Temperature IR 2.0          Measures contactless object temperature between -70°C and +380°C
Thermal Imaging             80x60 pixel thermal imaging camera
Thermocouple 2.0            Measures temperature with thermocouples
Tilt                        Detects inclination of Bricklet (tilt switch open/closed)
UV Light                    Measures UV light
UV Light 2.0                Measures UV-A, UV-B and UV index
Voltage/Current 2.0         Measures power, DC voltage and DC current up to 720W/36V/20A0
</pre>
</td>
<td>
<a href="https://www.zephyrproject.org/">zephyrproject.org</a>
<pre xxxsmall zoom>
- Small, Scalable Open Source RTOS for IoT Embedded Devices
  The Zephyr™ Project is a scalable real-time operating system (RTOS)
  supporting multiple hardware architectures, optimized for resource
  constrained devices, and built with security in mind. 
</pre>
</td>
<td>
<a href="https://rhiot.gitbooks.io/rhiotdocumentation/content/">Rhiot</a><br/>
IoT Messaging (with Camel Connector)
<pre xxxsmall zoom>
Rhiot is a messaging platform for the Internet Of Things.
We are focused on an adoption of the Red Hat JBoss middleware
portfolio to provide solutions to the common IoT-related challenges.

An apache camel connector exists to connect to the bricklet.
</pre>
</td>
<td>
  <a href="https://www.qualcomm.com/news/onq/2018/12/14/using-droplit-bring-cloud-edge">droplit.io</a>
<pre xxxsmall zoom>
If you’re an IoT device developer, you know the "I" in "IoT" means your device will, at some point, need to communicate with the cloud. But what if your device development expertise or schedule doesn’t extend to cloud development?

Enter droplit.io (Droplit) — a cloud-based, protocol-agnostic platform, that provides a rich API for integrating networked devices through the cloud, such as consumer wireless products, building automation systems, and PLCs.
</pre>
</td>
</tr>
</table>
<table>
<tr>
<td TODO>
<a href="http://linuxgizmos.com/amazon-aims-an-aws-savvy-version-of-freertos-at-iot-gizmos/">FreeRTOS</a>
</td>
<td>
  <a href="https://projects.eclipse.org/projects/iot.hono">Eclipse Hono</a>
</td>
<td>
<a href="https://www.ecomotion.org.il/">EcoMotion</a><br/>
Smart Transportation
<pre xxxsmall zoom>
EcoMotion is a dynamic community with over 600 start-ups (constantly growing) 
and 7,000 members in the Smart Transportation sector. Understanding startups 
do not grow in a void, we bring together entrepreneurs, academics, government 
officials, local & global automotive industry representatives, investors and 
much more; providing a support platform for knowledge-sharing, networking and 
collaboration.
</pre>
</td>
<td>
  Message Queue Telemetry Transport<br/>  Protocol(MQTT): 
  (up to 93 times faster than HTTP!!)
<pre xxxsmall zoom>
- Extracted from: <a href="https://medium.com/mqtt-buddy/mqtt-vs-http-which-one-is-the-best-for-iot-c868169b3105">link</a>:
  """According to measurements in 3G networks, throughput of MQTT is 93 times 
   faster than HTTP’s.  """
- does not define the message format at all 

- Very light, with headers of <2Bytes. 
- Suitable for unreliable mobile connections.
  (ex, marine communication)

- ensures high delivery guarantees. There are 3 levels of Quality of Services:
  - at most once: guarantees a best effort delivery.
  - at least once: guaranteed that a message will be delivered at least once. But the message can also be delivered more than once.
  - exactly once: guarantees that each message is received only once by the counterpart

- provides users with options of Last will & Testament and Retained messages. 
  - The first means that in case of unexpected disconnection of a client all
    subscribed clients will get a message from a broker. 
  - Retained message means that a newly subscribed client will get an immediate
     status update.
  - HTTP Protocol has none of these abilities.
</pre>
</td>
<td>
  <a href="https://blog.mozilla.org/blog/2018/02/21/snips-uses-rust-embedded-voice-assistant/?utm_source=dev-newsletter&utm_medium=email&utm_campaign=mar1-2018">rust-embed.voice assistant</a>
<pre xxxsmall zoom>
- The team at Paris-based Snips has created a voice assistant that can be 
  embedded in a single device or used in a home network to control lights, 
  thermostat, music, and more. You can build a home hub on a Raspberry Pi and 
  ask it for a weather report, to play your favorite song, or to brew up a 
  double espresso. Manufacturers like Keecker are adding Snips’ technology to 
  products like multimedia home robots. And Snips works closely with leaders 
  across the value chain, like NVIDIA, EBV, and Analog Devices, in order to 
  voice-enable an increasingly wider range of device types, from speakers to 
  home automation systems to cars.
</pre>
</td>
</tr>
</table>

<table>
<tr>
<td>
  <a href="https://www.xataka.com/accesorios/qualcomm-nos-promete-redes-wifi-a-10-gbps-nuevos-estandares-wigig-no-todo-buenas-noticias">WiGig<br/></a>
 (10Gbps line-of-view WiFi)
<pre xxxsmall zoom>
</pre>
</td>
<td>
 <a href="http://www.moddable.com/moddable-zero.php"></a>
20$ easy-way to add touch-scr to IoT
<pre xxxsmall zoom>
"""All the components in Moddable Zero have been selected to keep the cost low
. The two main components are the NodeMCU board and the touch screen. The 
NodeMCU module carries the ESP8266, Wi-Fi antenna, Flash ROM, FTDI chip, and 
USB connector. The touch screen is an unbranded QVGA (240 x 320) display with 
16-bit pixels driven by an ILI9341 display controller and an XPT2046 
resistive touch controller. We’d like to use a capacitive touch display, but 
the prices are still considerably higher. That said, our touch driver 
delivers reliable touch input with the XPT2046."""

The Moddable SDK has four key features that make it realistic to build modern 
user experiences on Moddable Zero.

    Tools. Getting images that look good onto an inexpensive microcontroller 
is challenging. The Moddable SDK contains tools that convert PNG, JPEG, BMP, 
and animated GIFs into formats that can be rendered efficiently and stored 
compact on the microcontroller. There are also tools to compress anti-aliased 
fonts for use on the device.

    Graphics library. The Commodetto graphics library is used for all image 
loading and rendering in the Moddable SDK. It contains the Poco rendering 
engine which provides high speed rendering, with alpha channel support, 
blending, and clipping.

    UI framework. The Piu user interface framework is a true object oriented 
user interface library that tightly integrates with Poco to provide cascading 
styles, timeline animations, text layout, localization, touch handling, and 
more.

    JavaScript. Most developers find implementing a user interface in 
JavaScript to be faster and easier than using C or C++ as is common today on 
microcontrollers. Both Piu and Commodetto are designed to work efficiently 
with the XS JavaScript engine at the core of the Moddable SDK.
</pre>
</td>
<td>
   <a href="http://model.webofthings.io/">W3C Web Thing Model</a>
<pre xxxsmall zoom>
</pre>
   <a href="https://iot.mozilla.org/wot/">Mozilla IoT Web Thing API</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
  <a href="https://en.wikipedia.org/wiki/Multicast_DNS">Multicast DNS</a>
<pre xxxsmall zoom>
- In computer networking, the multicast DNS (mDNS) protocol resolves host 
names to IP addresses within small networks that do not include a local name 
server. It is a zero-configuration service, using essentially the same 
programming interfaces, packet formats and operating semantics as the unicast 
Domain Name System (DNS). Although Stuart Cheshire designed mDNS as a stand-
alone protocol, it can work in concert with standard DNS servers.

The mDNS protocol is published as RFC 6762, uses IP multicast User Datagram 
Protocol (UDP) packets, and is implemented by the Apple Bonjour and open 
source Avahi software packages. Android contains an mDNS implementation.
mDNS has also been implemented in Windows 10, but its use there is limited to 
discovering networked printers.

mDNS can work in conjunction with DNS Service Discovery (DNS-SD), a companion 
zero-configuration technique specified separately in RFC 6763.
</pre>
</td>
</tr>
</table>

Robotics:
<table>
<tr>
<td>
  <a href="https://en.wikipedia.org/wiki/Programmable_logic_controller">Programmable logic controller (PLC)</a>
<pre xxxsmall zoom>
- A programmable logic controller (PLC) or programmable controller is an 
  industrial digital computer which has been ruggedized and adapted for the 
  control of manufacturing processes, such as assembly lines, or robotic devices
  , or any activity that requires high reliability control and ease of 
  programming and process fault diagnosis. 
- Siemens S7
- Allen Bradley
- Omron
- ...

</pre>
</td>

<td>
  <a href="https://new.abb.com/products/robotics">ABB Robotics</a>
<pre xxxsmall zoom>
ABB is a leading supplier of industrial robots and robot software, equipment 
and complete application solutions. We’re at home in 53 countries and have 
installed more than 400,000 robots, supported by the broadest service network 
and offering in the industry.
</pre>
</td>
<td>
  <a href="https://www.kuka.com/">Kuka Robotics</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
  FANUC
</td>
<td>
  COMAU
</td>
<td TODO>
 Prog. standars for automotive plants
  VASS
<pre xxxsmall zoom>
</pre>
  DCP
<pre xxxsmall zoom>
</pre>
  PL7
<pre xxxsmall zoom>
</pre>
</td>
</tr>
</table>

</body>
<!--
TODO_START: {
https://boundarydevices.com/boot2qt-getting-started-guide/

Boot2Qt Getting Started Guide
Introduction

Developing an embedded product requires 3 main steps:  selection of the proper hardware platform, operating system selection/setup, and User Interface (UI) development.  All 3 of these steps are very closely tied together.  t is critical to select the proper hardware platform that also has excellent operating system support as well as the proper UI tools.  Boundary Devices products are exclusively based on the very popular and powerful i.MX family of processors from Freescale.  Our boards have been designed to harness the extreme versatility of the processor while providing the user a variety of integration options.  On the operating system side, Boundary Devices has industry leading operating system options including Android, Yocto, Ubuntu, and Buildroot.  The third and final piece of the puzzle is the UI and this blog post intends to show how fast and easy the setup to get started with a new Qt project when using Boundary Devices platforms.   One of the most complex and time-consuming elements of an embedded project is the User Interface development.  

Thanks to a Qt for Device Creation image (formerly called Boot2Qt or B2Qt) working on all our platforms, one can download the IDE and start developing within minutes!
_____________________
https://github.com/autonome

Turn an old smartphone into a home automation gizmo

At the recent Embedded Linux Conference and OpenIoT Summit, Mozilla Technical Evangelist Dietrich Ayala proposed a simple and affordable solution to home automation: A discarded smartphone can handle some of the most useful home automation tasks without requiring expensive hubs and sensors 

“Many phones have proximity or ambient light sensors, orientation, and battery,” continued Ayala.

Ayala introduced his “Context” JavaScript program for turning an old Firefox OS smartphone into a combination hub and sensor array for remote home monitoring.

Most commercial IoT products include cloud services for remote connectivity, storage, and in some cases, processing. “How much of your personal life is being exposed to a black box where you have no guarantee or visibility?” said Ayala. “There are no standards, legislation, or case law around what people can do with this data.”

Many hacker-oriented automation products avoid using the cloud, but at the price of greater complexity. You get more privacy and open source personalization, “but at a high cost in experimentation in time and learning,” said Ayala.

IoT’s killer app: presence or absence

A greater challenge affecting commercial and DIY IoT systems alike is the lack of a compelling purpose. “You have to ask yourself, what problems am I addressing?” said Ayala. “Do I really need to have the light reflect my mood or do automated shopping? To me these aren’t solving day to day problems. People have problems like not having enough money or time, or worrying about sick relatives. Maybe they need to know if someone is in their house or whether basic services are working. What you need is physical awareness put in context — the presence or absence of things like noise, motion, or services.”

Most of these capabilities, Ayala realized, are already available on a smartphone even without hooking up additional sensors. You could even repurpose several old phones in a WiFi- or Bluetooth-based sensor network.

Ayala started by writing some JavaScript code to gain access to low level sensors. With Firefox OS, he found he could even avoid building a downloadable app. “With progressive web apps, you can distribute a web page, so users can load it and then receive push notifications forever without loading the page again,” said Ayala. “You don’t even need a UI. You can just reply to the body of channels and configure how much you want to know about a given topic.”

Notifications are currently sent to IFTTT’s maker channel. “From there, I can hook it up to wherever I want,” said Ayala.

Much of the functionality of Ayala’s Firefox OS script can work on other platforms. It would be fairly straightforward to do something similar in a mobile framework, or for more experienced developers, even a native app, Ayala said.

Ayala spent a lot of time studying the readouts from sensors, as well as from the phone’s microphone, camera, and, radios, that would enable a remote user to draw conclusions about what was happening at home. This contextual information could then be codified into more useful notifications.

With ambient light, for example, if it suddenly goes dark in the daytime, maybe someone is standing over a device, explained Ayala. Feedback from the accelerometer can be analyzed to determine the difference between footsteps, an earthquake, or someone picking up the device. Scripts can use radio APIs to determine if a person moving around is carrying a phone with a potentially revealing Bluetooth signature.

With the battery API, you can usually tell if the power went out. If the phone has some battery life and an SMS plan, you can have it send a text message alert.

When sensors hit certain levels, you can have the script use a media API to turn on a camera or mic to see what’s up. In one experiment, Ayala used the getUserMedia API to turn on the mic and record the average volume of ambient sound. “There are some signatures you can get from sound that might yield useful information around presence or absence,” he said.

Future enhancements might tap a mobile platform’s connectivity and discovery interfaces to hook up with other devices. On Firefox OS, these include TCP and UDP sockets, DLNA, and others. Ayala also sees possibilities using local speech recognition APIs.

“In the end, it’s about using the phone as an awareness tool,” said Ayala. “About learning about the environment and yourself.”

Watch Ayala’s complete presentation below:

https://www.youtube.com/watch?list=PLGeM09tlguZRbcUfg4rmRZ1TjpcQQFfyr&v=4RWSXlai6PE
________________
Iterators & Generators:
________________
OOP {{{
function Message (subject, recipient, content){
· this.subject = subject;
· this.recipient = recipient;
· this.content = content;
}
Now that we have created a Message function we define its ".prototype" to complete the "Class":
Message.prototype = { 
· constructor: Message,   <--!!
· 
· sendMessage: function(){
· · console.log('Sending message to ' + this.recipient);
· },
· 
· show : function(){
· · console.log('To:' + this.recipient + 'Subject: ' + this.subject + 'Message:' + this.content);
· }
};

The complete definition of the Message object is now in one place, and the same methods are available to all
instances of Message we create. Each message created can have its own instance properties that are passed through to
the constructor.
 
var workMessage = new Message('Work complete'', 'boss@mycorp.com', 'My work is done here');
var socialMessage = new Message('Time to go out', 'friend@gmail.com', 'Finished work now.');
workMessage.send();
socialMessage.send();
________________________
var F = function() {};// This is a function object.
var p = F.prototype; // prototype object associated.
var c = p.constructor; // function associated with pro.

c === F 
true: F.prototype.constructor==F for any function
________________________
Method overide:
 
Dog.prototype.talk = function(){
 console.log('The dog says');
 Animal.prototype.talk.call(this);
}

When calling the parent object method earlier, we needed to know that the parent was Animal.prototype. We can make the code more elegant by keeping a record of what the parent object is.
 
Dog.prototype = new Animal();
Dog.prototype.constructor = Dog;
//define the parent property
Dog.prototype.parent = Animal.prototype;
Dog.prototype.talk = function(){
console.log('The dog says'); //use the parent property to invoke the method
this.parent.talk.call(this);
}
__________________
Namespaces:
var com = com || {};
com.apress = com.apress || {};
com.apress.chapterone = com.apress.chapterone || {};
com.apress.chapterone.Message = function Message(...) {...}
 
The usage of a Message object will now need to respect the namespace as follows:
 
var myMessage = new com.apress.chapterone.Message(...);
 
}}}
_________________________
Debugging: {{{
________________________________________
Fiddler free web debugging proxy - Telerik
www.telerik.com/fiddler
Fiddler lets you see the “total page weight,” HTTP caching and compression at a glance,
________________________________________
Pause if dev.console open:
   debugger;
________________________________________
Show variable in JSON friendly form:
JSON.stringify(window.document) (Works on Firefox, Chrome, IExplorer?)
Result (String object):
{
· "location":{
· · "href":"http://stackoverflow.com/questions/3334341/jquery-javascript-json-to-string-variable-dump",                                                                                  
· · "origin":"http://stackoverflow.com",
· · "protocol":"http:",
· · "username":"",
· · "password":"",
· · "host":"stackoverflow.com",
· · "hostname":"stackoverflow.com",
· · "port":"",
· · "pathname":"/questions/3334341/jquery-javascript-json-to-string-variable-dump",
· · "search":"",
· · "hash":""
· },
· "jQuery17105674341916401555":2
}
________________________________________
Print the calling function in the called function:
var f1 = function(...){
· · console.warn("Called from:"+ arguments.callee.caller.toString());                                                                                                       
    ...
}
________________________________________
https://raygun.io/blog/2015/06/useful-javascript-debugging-tips-you-didnt-know/?utm_source=JSNewsletter25&utm_medium=SponsoredLink&utm_campaign=CooperPressSept15

most of the tips are for Chrome inspector even though my favourite tips are for Firefox. 

Quick find your DOM elements: Mark a dom element in the elements panel and use it in your console. Chrome inspector keeps the last 5 elements in its history, so the last marked element will be displayed with $0, second to last marked element $1 and so on.


Display object as tables in the console: console.table(animals);

Get the stack trace for a function:
        this.funcZ = function(){
                console.trace('trace car'); <-- show the stack trace up to this function
        }
}

Get the trace and your great list of all related functions. Every single one is clickable and you can now 
go back and fourth between these functions. It’s like a menu of functions just for you.


Quick find a function to debug:  debug(car.functY)  -Note: is not the same that console.debug-

Black box scripts that are NOT relevant: (ignore JQuery/... external libraries)
   https://raygun.io/blog/2015/05/javascript-debugging-with-black-box/
________________________________________
Find the important things in complex debugging: YOU can get style messages ussing CSS:
    console.todo = function( msg){
        console.log( '%c %s %s %s ', 'color: yellow; background-color: black;', '--', msg, '--');
    }
    console.important = function( msg){
        console.log( '%c%s %s %s', 'color: brown; font-weight: bold; text-decoration: underline;', '--', msg, '--');
    }
    console.todo("This is something that's need to be fixed");
    console.important('This is an important message');

In the console.log() you can for example set %s for a string, %i for integers and %c for custom style. You can probably find better ways to use this. If you use a single page framework you maybe want to have one style for view message and another for models, collections, controllers and so on. Maybe also name the shorter like wlog, clog and mlog. It’s time to use your own imagination.
Watch specific function calls and it’s arguments


Monitor, keep an eye to a given function: monitor(funct1);  - chrome console -
Every time the function is called it will be logged with the values that was passed in.

(I must say it would be good if the console could tell how many arguments were expected.
 In the above example func1 expect 3 arguments but only 2 is passed in. If that’s 
 not handled in the code it could lead to a possible bug)

Quickly access elements in the console:
    $(‘css-selector’) will return the first match of CSS selector. 
    $$(‘css-selector’) will return all of them. 
________________________________________
Postman is great but Firefox is faster:
   Many developers are using Postman to play around with ajax requests. Postman is great but I must 
 say it’s a bit annoying to open up a new browser window, write new request objects and then test them.
 Sometimes it’s easier to use your browser.  When you do so you no longer need to worry about 
 authentication cookies if you are sending to a password secure page. 
 This is how you would edit and resend requests in firefox:
   - Open up the inspector and go to the network tab. Right click on the desired request and 
     choose Edit and Resend. Now you can change anything you want:
     Change the header and edit your parameters and the simply hit resend.

    Speed up your markup with zen coding emmet
    Emmet and css the forgotten part
    Chrome command line api
    Chrome developer tools tips and tricks
    Firefox edit and resend a request
________________________________________
Black block script during debugging:

Chrome:
– Alt 1. Go to source in the inspector. Right click the file you want to black list and choose black box script.

– Alt 2. Click on the cog to open up the settings view. Click the button “manage framework black boxing”. 
  In the new pop up you can write a regexp as a path. This is great if you for example want to black box the 
  entire vendor folder.
  https://developer.chrome.com/devtools/docs/blackboxing

Firefox
- Go to the debugger tab in the inspector. Mark the script you want to black list. Click on the eye in 
  the very bottom left corner.
  https://hacks.mozilla.org/2013/08/new-features-of-firefox-developer-tools-episode-25/
________________________________________
https://github.com/jeanphix/Ghost.py Python scripted webkit engine
________________________________________
http://docs.seleniumhq.org/, http://docs.seleniumhq.org/projects/ide/, http://stackoverflow.com/search?q=selenium
"Selenium automates browsers. That's it! What you do with that  power is entirely up to you. Primarily, it is for automating web applications for testing purposes, but is certainly not limited to just that. Boring web-based administration tasks can (and should!) also be automated as well.
  Selenium has the support of some of the largest browser vendors who have taken (or are taking) steps to make Selenium a native part of their browser. It is also the core technology in countless other browser automation tools, APIs and frameworks."
________________________________________
http://google-opensource.blogspot.fr/2011/10/test-your-mobile-web-apps-with.html
Fiddler Debugger proxy: 
https://developer.mozilla.org/en-US/docs/Tools/Firefox_Tools_Adapter
https://developer.mozilla.org/en-US/docs/Tools/Performance
http://stackoverflow.com/questions/25174844/debugging-css-animation-performance-on-firefox
http://code.tutsplus.com/tutorials/headless-functional-testing-with-selenium-and-phantomjs--net-30545
________________________________________
http://blog.getsentry.com/2015/10/29/debuggable-javascript-with-source-maps.html

you can think of source maps as JavaScript’s version of debug symbols.

http://blog.getsentry.com/2015/10/29/debuggable-javascript-with-source-maps.html

you can think of source maps as JavaScript’s version of debug symbols.

Here’s an example source map:

{
    version : 3,                   // the version of the source map spec this file represents (should be “3”)
    file: "app.min.js",            // the generated filename this source map is associated with
    sourceRoot : "",               // the url root from which all sources are relative (optional)
    sources: ["foo.js", "bar.js"], // an array of URLs to the original source files
    names: ["src", "maps", "are"], // array of variable/method names found in your code
    mappings: "AAgBC,SAAQ,CAAEA"   // the actual source code mappings, represented as base64-encoded VLQ values
}

// app.min.js
$(function () {
    // your application ...
});
//# sourceMappingURL=/path/to/app.min.js.map

Good news: basically every modern JavaScript transpiler (TypeScript,...) has a command-line option for generating an associated source map. Let’s take a look at a few common ones.
}}}
_______________________________
Profiling{{{
"es5 vs es6 performance:
http://incaseofstairs.com/six-speed/
Up to 2500x decrease in some features!!!"
___________________________________
"YSlow

YSlow analyzes web pages and why they're slow based on Yahoo!'s rules for high performance web sites

Feature highlights

    Grades web page based on one of three predefined ruleset or a user-defined ruleset;
    It offers suggestions for improving the page's performance;
    Summarizes the page's components;
    Displays statistics about the page;
    Provides tools for performance analysis, including Smush.it™ and JSLint."
___________________________________

}}}
________________________
Strings:
Listing of String functions: The String object is immutable, which means that all of these methods do not alter the original String but instead return a new String.

.length: Returns the number of characters in the String.

charAt(index):  Returns the character at the specified index.

charCodeAt(index): Returns the Unicode of the character at the specified index.

fromCharCode(): Converts Unicode to characters.

concat(String1, ..., StringN)fromCharCode(): Joins Strings and returns a copy of the result.

indexOf(value): Returns the position of the first occurrence of the value in the String.(-1 if it does not exist)

lastIndexOf(value) Returns the position of the last occurrence of the value in the String. (-1 if it does not exist)

match(regExp): Finds a match for the regular expression within the String, returning the matches as an array.

replace(regExp, value): Finds a match for the regular expression within the String and replaces the resulting subString with a new value.

search(regExp): Finds a match for the regular expression within the String and returns the position of the match.

slice(startPos, endPos): Extracts the part of the String between the specified start and end positions.

split(token): Splits the String into an array of subStrings, using the specified token as the delimiter.

substr(startPos, numChars): Extracts a subString from the String, beginning at the start position through the specified number of characters.

subString(startPos, endPos): Extracts a subString from the String, between the specified start position and end position.

toLowerCase(): Returns the String in all lowercase characters.

toUpperCase(): Returns the String in all uppercase characters.

trim(): Returns the String without any of the whitespace at either end.

valueOf(): Returns the primitive value of the String.


ECMAScript 6.0:

Template strings support string interpolation. Example:
 let a="A"
 let t = `a: ${a}`
 console.log(t)
 "a: A"
______________________________
Arrays:
Arrays ListingMethod/Property.
length
Returns the number of items in the array and can also be used to set the size of the array.

indexOf()
Finds an element in the array and returns its position. Returns -1 if an element cannot be found.

join()
Joins all elements of the array to create a String.

lastIndexOf()
Finds the last occurrence of an element within the array and returns its position, -1 if the
element cannot be found.

pop()
Removes the last element in the array and returns the element.

push()
Adds the element to the end of the array and returns the new length of the array.

reverse()
Reverses the order of the elements in the array.

shift()
Removes the first element from the array and returns that element.

slice()
Selects part of the array and returns this as a new array.

sort()
Sorts the elements of the array. A sort function can be provided as a parameter to enforce a
particular sorting strategy.

splice()
Adds or removes elements from the array. The method accepts two lists of elements: the
elements to remove and the ones to be added.

toString()
Returns a String representation of the array.

unshift()
Adds elements to the beginning of the array and returns the new length.

valueOf()
Returns the primitive value of the array.
      __________________
"var l = [1,2,3,4]
1 in l  // returns true
""a"" in l // returns false
l.indexOf(1) // returns 0
l.pop(2 /*index*) // returns 3 (the popep element). Now l = [1,2,4]"
______________________________
Joint.JS: {{{
http://www.jointjs.com/tutorial
"- Diagrams consist of elements connected with links.
- A diagram in JointJS is represented by a model joint.dia.Graph. 
- This model then collects cells (a term representing both elements and links).
- A cell could therefore be either an element (joint.dia.Element or its inheritants) or a link (joint.dia.Link).
-  In JointJS (starting from version 0.6), you manipulate models, not views."
   ______________
- To be able to see something on the screen, the graph model must be attached to the joint.dia.Paper view.
   ______________
- Joint.JS  "Hello World!:
  <link rel="stylesheet" href="joint.css" />
  <script src="joint.js"></script>
          
          
  var graph = new joint.dia.Graph;
  
  var paper = new joint.dia.Paper({
      el: $('#myholder'),
      width: 600,
      height: 200,
      model: graph, <--- instance of graph
      gridSize: 1
  });
  var paperSmall = new joint.dia.Paper({
      el: $('#myholder-small'),
      width: 600,
      height: 100,
      model: graph, <--- instance of graph
      gridSize: 1
  });
  paperSmall.scale(.5);
  paperSmall.$el.css('pointer-events', 'none');
  
  var rect = new joint.shapes.basic.Rect({
      position: { x: 100, y: 30 },

- Event handling (based on the Backbone MVC)
  See all events triggered by any model in the graph:

  graph.on('all', function(eventName, cell) {
      console.log(arguments);
  });
         
  rect.on('change:position', function(element) {
      console.log(element.id, ':', element.get('position'));
  });
        
- Styling:
  rect.attr({
      rect: { fill: '#2C3E50', rx: 5, ry: 5, 'stroke-width': 2, stroke: 'black' },
      text: {
          text: 'my label', fill: '#3498DB',
          'font-size': 18, 'font-weight': 'bold', 'font-variant': 'small-caps', 'text-transform': 'capitalize'
      }
  });

- Setting vertices on a link is as simple as:
  link.set('vertices', [{ x: 300, y: 60 }, { x: 400, y: 60 }, { x: 400, y: 20 }])
  If you prefer the link to not be sharply broken at the vertices but instead interpolated by a curve, 
  set the smooth attribute:
  link.set('smooth', true)

- JointJS has built-in elements for basic shapes.
  These shapes are all in the joint.shapes.basic namespace and consist of 
  - joint.shapes.basic.Rect
  - joint.shapes.basic.Circle
  - joint.shapes.basic.Text
  - joint.shapes.basic.Image
___________________
WebApps: https://developer.mozilla.org/en-US/Apps
https://hacks.mozilla.org/2013/01/writing-web-apps-quickly-with-mortar/
___________________
http://raphaeljs.com/
_________________
https://hacks.mozilla.org/2014/03/better-integration-for-open-web-apps-on-android/
_____________________
WebRTC {{{
http://gingertech.net/2014/01/08/use-deck-js-as-a-remote-presentation-tool/
http://www.html5rocks.com/en/tutorials/getusermedia/intro/
}}}
___________________
"Stupidly simple jQuery plugin for Facebook login
http://garyrafferty.com/2013/08/20/Stupidly-Simple-Facebook-Login-JQuery-Plugin.html
<!DOCTYPE html>
<html>
  <head>
          <script type='text/javascript' src='jquery.js'></script>
          <script type='text/javascript' src='flogin.js'></script>
          <script type='text/javascript'>
            $(function() {
              $('#login').facebook_login({
                appId: 'YOUR-FACEBOOK-APP-ID',  # your facebook application id
                endpoint: '/sessions/new',      # where to POST the response to
                onSuccess: function(data) {},   # what to do on success, usually redirect
                onError: function(data) {}      # what to do on error
                permissions: 'read_stream'      # what permissions you need, default is just email
              });
            });
          </script>
  </head>
  <body>
    <a href='#' id='login'>Login with Facebook</a>
  </body>
</html>

See also W3C OpenSocial: 
http://www.w3.org/blog/2014/12/opensocial-foundation-moves-standards-work-to-w3c-social-web-activity/"
_____________________
Compressing JS:
We use uglify for this purpose like shown in the next script snipet:

rm -rf packaging/html # Avoid packaging old stuff by mistake 

if [ -d compiledJS ];  then
· · rm -rf compiledJS
· · if [ $? != 0 ]; then
· · · · echo "couldn't remove compiledJS"
· · · · exit 1
· · fi
fi
mkdir compiledJS
cp -R html compiledJS/
rm -rf compiledJS/html/html_tests

echo "debug: $BASEDIR/compiledJS/html/services"
cd $BASEDIR/compiledJS/html/services || exit 1

find ./ -name "*js" -type f | grep -v "media" | while read f ; do
· · uglifyjs --max-line-len 80 -o tmp.js ${f} 1>/dev/null
· · mv tmp.js ${f} 1>/dev/null
________________________
Async Prog:
TODO: Promises vs yield vs async/await vs callbacks

https://github.com/caolan/async
"Collections
· · each eachSeries eachLimit map mapSeries mapLimit filter filterSeries 
· · reject rejectSeries reduce reduceRight detect detectSeries sortBy some 
· · every concat concatSeries

Control Flow
· · series parallel parallelLimit whilst doWhilst until doUntil forever waterfall 
· · compose applyEach applyEachSeries queue cargo auto iterator apply nextTick 
· · times timesSeries

Utils
· · memoize unmemoize log dir noConflict  "
"async.map(['file1','file2','file3'], fs.stat, function(err, results){
· · // results is now an array of stats for each file
});

async.filter(['file1','file2','file3'], fs.exists, function(results){
· · // results now equals an array of the existing files
});

async.parallel([
· · function(){ ... },
· · function(){ ... }
], callback);

async.series([
· · function(){ ... },
· · function(){ ... }
])"
_________________________
WebWorkers:
"Src:· http://www.khronos.org/registry/typedarray/specs/latest/
· · · http://www.whatwg.org/specs/web-apps/current-work/multipage/common-dom-interfaces.html#concept-transferable-neutered

 In order to enable repeated transfer of large amounts of data between Web Workers [WEBWORKERS], ArrayBuffer implements the Transferable interface [HTML]. This section defines the behavior of ArrayBuffers and views under the structured cloning [HTML] and transfer algorithms. "
"https://serviceworke.rs/
The Service Worker Cookbook is a collection of working, practical examples of using service workers  in modern web apps.
__________________
CSS Notes:
https://docs.google.com/spreadsheets/d/1KVrkITlASLWQt1tMHKG2fnckxnB9c94HcSSbHAHgILo/edit#gid=0
"https://www.fontsquirrel.com/
Free fonts have met their match. We know how hard it is to find quality freeware that is licensed for commercial work. We've done the hard work, hand-selecting these typefaces and presenting them in an easy-to-use format. Here are some of our favorites:"
"http://christ-offer.blogspot.com.es/2011/05/html5css3-fonts-with-font-face.html

Embedding specific fonts on a web page, traditionally, has been accomplished using images.  Though IE 5.0+ allowed you to embed fonts on your web page, they needed to be in EOT (Embedded OpenType) format.  Other browsers supported TTF (TrueType) and OTF (OpenType) fonts.  IE9 now supports TTF, OTF and also WOFF (Web Open Font).  To accomplish the task of embedded real fonts into your web pages, use the CSS3 @font-face rule.

Where to get quality FREE fonts for use in web pages?  FontSquirrel is a great place with hundreds of free fonts, including kits that demonstrate how to embed and use them into a web page, plus a generator to create your own.  With the kit, you get the font in all the formats so that you can craft your web pages to support all the major "
"http://codepen.io/dehash/pen/Bfory
CSS3 3D image animation "
______________________
Binary Data
https://github.com/jDataView/jBinary/wiki/jBinary-Constructor
https://github.com/jDataView/jDataView
http://www.khronos.org/registry/typedarray/specs/latest/
  ______________________________________________________________________
  | "* BufferArray: Array of Bytes. Constructor BufferArray(byte length)
  | * TypedArray: Type view of the Buffer Array (Ui|i)nt(8|16|32)Array , Float(32|64)Array
  | · · Constructors:
  | · · · +- TypedArray(byte length) <-- Creates new BufferArray
  | · · · +- TypedArray(TypedArray (existing)array) <-- Creates new BufferArray duplicated of array
  | · · · +- TypedArray(sequence<type> array) <-- Creates new BufferArray from Javascript array
  | · · · +- TypedArray((existing)buffer[, byteOffset, length]) <-- Creates new view from existing buffer
  | · · Methods:
  | · · · +- void set( TypedArray array[, offset]) <- copy values from TypedArray
  | · · · +- void set( type[] array[, offset]) <- copy values from JS array
  | · · · +- TypedArray subarray(offsetFirstElement [, offsetLastElement=""last one""]) <- Creates a view, not a new buffer!!
  | 
  | * DataView: Low level endianess aware view of the Buffer (use for file/hardware/network access with a defined endianess defined ""outside"" our computer)
  | · · Contructor:
  | · · · +- DataView(ArrayBuffer buffer[, byteOffset, byteLength])
  | · · Methods (Read):
  | · · · +- get(Ui|I)nt(8|16|32)(byteOffset[, littleEndian])
  | · · · +- getFloat(32|64)(byteOffset[, littleEndian])
  | · · Methods (Write):
  | · · · +- set(Ui|I)nt(8|16|32)(byteOffset, value[, littleEndian] )
  | · · · +- setFloat(32|64)(byteOffset, value[, littleEndian] )
  | Note: Detecting endianness:
  | · var littleEndian = function() {
  | · · var buffer = new ArrayBuffer(2);
  | · · new DataView(buffer).setInt16(0, 256, true);
  | · · return new Int16Array(buffer)[0] === 256; /* true | false */
  | };
  ______________________________________________________________________
- Creating a simple array of 128 32-bit floats and filling with 8 consecutive floats:
    
  var f32s = new Float32Array(128);
  
  var groupLength = 8;    
  for (var i = 0; i < 128/groupLength; ++i) {
  · var sub_f32s = f32s.subarray(i, i+groupLength);
  · for (var j = 0; j < 8; ++j) {
  · ·  sub_f32s[j] = j;
  · }
  }

- Representing a point with 3xFloat32 coordinates values plus 4xUint8 color data values:

  var elementSize = 3 * Float32Array.BYTES_PER_ELEMENT + 4 * Uint8Array.BYTES_PER_ELEMENT;
  var buffer = new ArrayBuffer(4 * elementSize);
  var coords = new Float32Array(buffer, 0);
  var colors = new Uint8Array(buffer, 3 * Float32Array.BYTES_PER_ELEMENT);

- Slicing a large array into multiple regions:
  var buffer = new ArrayBuffer(1024);
  var floats = new Float32Array(buffer,   0 /* · · 0 offset*/, 128); (128*4 = 512 bytes)
  var shorts = new Uint16Array (buffer, 512 /*floats offset*/, 128); (12*2  = 256 bytes)
  var bytes = new Uint8Array · (buffer, shorts.byteOffset + shorts.byteLength);

- JBinary
  ref: https://github.com/jDataView/jBinary

  - Typical scenario:
  - Create your custom types using jBinary.Type (if needed).
  - Describe type set with JavaScript-compatible declarative syntax.
  - Create jBinary instance from jDataView (or any underlying type) and your type set.

- Constructors:
  +- new jBinary(jDataView data[, typeSet])
  +- new jBinary(javascript Byte array[, typeSet])
  Read Methods:
  +- read(type[, offset = binary.tell()]) <- If offset is provided internal pointer doesn't moves
  Pointer Methods:
  +- tell(): Return the current position. Ex: var currentPos = binary.tell();
  +- seek(position[, callback]): Go to position; if callback => execute it and reset position.
  +- skip(count[, callback]): Advance by count bytes; same callback behavior as seek
  Instance helpers
  +- slice(start, end[, forceCopy = false]): Returns sliced version of current binary with same type set. 
  +- as(typeSet[, modifyOriginal = false]): Casts instance to typeSet
  Loading Data
  +- jBinary.loadData(source, callback(error, data)) (static method)
  | · · source := Blob/File | HTTP(S)_URL | Data-URI (simple|base64-encoded) | Node.js (local file path|stream)
  
  var b1 = new jBinary([0x05, 0x03, 0x7F, 0x1E]); // with default typeset
  var b2 = new jBinary(new jDataView(data, 5, 10, true), { MetaName: ['string', 30]}); // typeset with custom type MetaName.
  var firstInt = b1.read('uint32'); · · · · · // uint32 value at offset 0 => Pointer moves 4 bytes
  var byteAtOffset100 = b2.read('uint8', 100);// uint8 value at custom position => Pointer unchanged(offset provided)
  var intAt200 = binary.seek(200, function () { return this.binary.read('int32') });
  var intAfter8 = binary.skip(8, function () { return this.binary.read('int32') });
  var binary = someExternalBinary.as(TAR); // casting
  fileInput.addEventListener('change', function () {
    jBinary.loadData(fileInput.files[0], function (error, data) {
      if (error) { return console.log(error); }
      ...
    });
  });
  
  jBinary.load('sample.tar', function (error, binary) {
    if (error) { return console.log(error); }
    var tar = binary.read('File'); // TAR format auto-detected (using jBinary.Repo)
  }); 

  - Typesets normally are object dictionaries 
    { typeName1 : type1 , <- types that can refer to each other but they may also contain special config 
      typeName2 : type2 , values that set some global options or modes for entire typeset. Options are:
      typeName3 : type3 ,
      typeName4 : type4 ,
      typeName5 : type5 ,
      typeName6 : type6 ,
       ...
    }
    - jBinary.all - reference to general type that represents entire data; required for enabling user to read/write entire file at once.
    - jBinary.mimeType - sets mime-type which should be used for saving data from this typeset (i.e., when calling toURI without argument).
    - jBinary.littleEndian - sets endianness for this format.
  
  - __________ Integers ______________
    · uint8 (byte) / int8 - one-byte integer.
    · uint16 / int16 - word.
    · uint32 / int32 - dword (double-word).
    · uint64 / int64 - qword - please see warning about precision loss in jDataView documentation.
    ___________ Floats  ______________
    · float32 (float) - classic 32-bit float used in languages like C.
    · float64 (double) - 64-bit float with double precision (double in C), default for JavaScript number representation.
    ___________ Strings ______________
    · char - one-byte binary character.
    · string(@length, encoding = 'binary') - string of given length in binary or 'utf8' encoding, reads/writes to the end of binary if length is not given.
    · string0(@length, encoding = 'binary') - null-terminated string stored in given number of bytes; treated as dynamic null-terminated string if length is not given.
    _________ Complex types __________
    · const(baseType, value, strict = false) - treats type as constant; if read value does not match expected and strict mode is enabled, calls strict(readValue) if it is function or simply throws TypeError if not.
    · array(baseType, @length) - array of given type and length, reads/writes to the end of binary if length is not given.
    · object(structure, proto = Object.prototype) - complex object of given structure (name => type), creates new context while processing inner properties; object may also contain functions instead of types for calculating some values during read/write for internal purposes.
    · extend(...object structures...) - extends one structure with others; merges data into one object when reading and passing entire object when writing.
    · enum(baseType, matches) - enumeration type with given key <=> value map (if value not found in the map, it's used "as-is").
    _________ Binary types __________
    · bitfield(length) - unsigned integer of given bit length (supports up to 32 bits, wraps around 2^32).
    · blob(@length) - byte array represented in most native type for current engine; reads/writes to the end of binary if length is not given.
    · binary(@length, typeSet = {}) - jBinary instance on part of original one with given length and optional custom typeset (useful for container formats); accepts also raw binary data when writing.
    _____ Control statements   ______
    · if(@condition, trueType, falseType) - conditional statement.
    · if_not(@condition, falseType, trueType) - same but inverted.
    · skip(@length) - simply skips given length on read/write.
    ______About @  __________________
    
    All the arguments marked with @(references) can be passed not only as direct values, but also as getter functions callback(context) or string property names inside current context chain.
  
  - Usage (in Browser): Include scripts for jDataView and jBinary like that:
    <script src="//jdataview.github.io/dist/jbinary.js"></script>
    <script>
    · var typeSet = { magic: ['array', 'uint8', 4] };
    · jBinary.load('file.bin', typeSet, function (err, binary) {   console.log(binary.read('magic')); } );
    </script>
  - HLS player using JBinary
    http://rreverser.github.io/mpegts/

  - Ex1: Audio Data Transport Stream (ADTS):
    (function (exports) {
    var ADTS = {
    /* :
     * Structure: AAAAAAAA AAAABCCD EEFFFFGH HHIJKLMM MMMMMMMM MMMOOOOO OOOOOOPP (QQQQQQQQ QQQQQQQQ)
     * · · · · · ·^bit (not byte)
     * Header consists of 7 or 9 bytes (without or with CRC).
     * Usage in MPEG-TS
     * - ADTS packet must be a content of PES packet. Pack AAC data inside ADTS frame, than pack inside PES packet, then mux by TS packetizer.
     * - ADTS frames goes one by one in TCP stream. Look for syncword, parse header and look for next syncword after. 
    */
        ADTSPacket: {
    /*bits Letter*/· _start· · · · · · : function () { return this.binary.tell() },
    /*12· · · ·A */· _syncWord· · · · ·: ['const', 12, 0xfff, true],· · · · · ·// syncword 0xFFF, all bits must be 1 
    /* 1· · · ·B */· version· · · · · ·: ['enum',· ·1, ['mpeg-4', 'mpeg-2']],· // MPEG Version: 0 for MPEG-4, 1 for MPEG-2 
    /* 2· · · ·C */· layer· · · · · · ·: ['const',· 2, 0],· · · · · · · · · · ·// Layer: always 0 
    /* 1· · · ·D */· isProtectionAbsent: 1,· · · · · · · · · · · · · · · · · · // protection absent, Warning, 1 => no CRC, 0 => CRC
    /* 2· · · ·E */· profileMinusOne· ·: 2,· · · · · · · · · · · · · · · · · · // Audio_Object_Types
    /* 4· · · ·F */· samplingFreq· · · : ['enum',· ·4, [96000,88200,64000,48000,44100,32000,24000,22050,16000,12000,11025,8000,7350]],// MPEG4 Sampl.FrequencyIndex
    /* 1· · · ·G */· _privateStream· · : 1,· · · · · · · · · · · · · · · · · · // private stream, set to 0 when encoding, ignore when decoding
    /* 3· · · ·H */· channelConfig· · ·: 3,· · · · · · · · · · · · · · · · · · // MPEG4 Audio Channel_Configurations(if 0, configuration is sent via an inband PCE)
    /* 4· · IJKL */· _reserved· · · · ·: 4,· · · · · · · · · · · · · · · · · · // originality, home, copyrighted, copyright start bits
    /*13· · · ·M */· frameLength· · · ·: 13, · · · · · · · · · · · · · · · · · // frame length value. Must include 7 or 9 bytes of header length: = (ProtectionAbsent == 1 ? 7 : 9) + size(AACFrame) 
    /*11· · · ·O */· bufferFullness· · : 11, · · · · · · · · · · · · · · · · · // Buffer fullness
    /* 2· · · ·P */· aacFramesCountMinusOne: 2, · · · · · · · · · · · · · · · · // # of AAC frames(RDBs) in ADTS frame minus 1, for maximum compatibility always use 1 AAC frame per ADTS frame 
    /*16· · · ·Q */· data· · · · · · · : ['blob', function (context) { return context.frameLength - (this.binary.tell() - context._start) }] // CRC if protection absent is 0 
    · · }
    };
    
    if (typeof module !== 'undefined' && exports === module.exports) {
    · · module.exports = ADTS;
    } else {
    · · exports.ADTS = ADTS;
    }
    
    })(this);

   - Ex2: MPEG-TS Packet:
   MPEG-TS Packet:
   Name · · · · · · · · · · · · ·|#bits|Description
   -----------------------------------------------------------------------------------------------
   sync byte· · · · · · · · · · ·|8· · |Bit pattern from bit 7 to 0 as 0x47 or ASCII char 'G"
   Transport Error Indicator(TEI)|1· · |Set by demodulator if can't correct errors in the stream, to tell the demultiplexer that the packet has an uncorrectable error
   Payload Unit Start Indicator· |1· · |Boolean flag with a value of true meaning the start of PES data or PSI otherwise zero only.
   Transport Priority· · · · · · |1· · |Boolean flag with a value of true meaning the current packet has a higher priority than other packets with the same PID.
   PID · · · · · · · · · · · · · |13 · |Packet Identifier
   Scrambling control· · · · · · |2· · |'00' = Not scrambled. For DVB-CSA only->'01':Reserved,'10':Scrambled with even key,'11':Scrambled with odd key
   Adaptation field exist· · · · |1· · |Boolean flag
   Contains payload· · · · · · · |1· · |Boolean flag
   Continuity counter· · · · · · |4· · |Sequence number of payload packets.  Incremented only when a payload is present (i.e., payload value is true)· · · · · · · · · · · ·   
   Note: the total number of bits above is 32 and is called the transport stream 4-byte prefix or Transport Stream Header.
   Adaptation field· · · · · · · |0+ · |If adaption field exist value is true
   Payload Data· · · · · · · · · |0+ · |If contains payload value is true
   
   jBinary Packet Representation: {
   · · _startof: function () { return this.binary.tell() },
   
   · · _syncByte: ['const', 'uint8', 0x47, true],
   · · transportError: 1,
   · · payloadStart: 1,
   · · transportPriority: 1,
   · · pid: 13, 
   · · scramblingControl: 2,
   · · _hasAdaptationField: ['Flag', 'adaptationField'],
   · · _hasPayload: ['Flag', 'payload'],
   · · contCounter: 4,
   · · adaptationField: ['FlagDependent', '_hasAdaptationField', 'AdaptationField'],
   · · payload: ['FlagDependent', '_hasPayload', jBinary.Template({
   · · · · getBaseType: function (context) {
   · · · · · · var pid = context.pid, file = this.binary.getContext(1);
   · · · · · · if (pid < 2 || pid in file.pat) {
   
______________
Video & MediaSource:
https://dvcs.w3.org/hg/html-media/raw-file/tip/media-source/media-source.html
 During playback, the media element pulls segment data out of the source buffers, demultiplexes it if necessary, and enqueues it into track buffers so it will get decoded and displayed. buffered describes the time ranges that are covered by media segments in the source buffer.
Once a new SourceBuffer has been created, it expects an initialization segment to be appended first. This first segment indicates the number and type of streams contained in the media segments that follow. This allows the media element to configure the necessary decoders and output devices
A MediaSource object can be attached to a media element by assigning a MediaSource object URL to the media element src  attribute or the src attribute of a <source> inside a media  element. MediaSource object URLs are created by passing a MediaSource  object to window.URL.createObjectURL().
Initialization segments are an optimization. They allow a byte stream format to avoid duplication of information in Media Segments that is the same for many Media Segments. Byte stream format specifications need not specify Initialization Segment formats, however. They may instead  require that such information is duplicated in every Media Segment.


   | http://updates.html5rocks.com/2011/11/Stream-video-using-the-MediaSource-API
   | ***** SUMMARY: *****
   | video.src = video.webkitMediaSourceURL;
   | ...
   | video.webkitSourceAppend(new Uint8Array(...));
   | if (endOfStreamDetected) {
   |     video.webkitSourceEndOfStream(HTMLMediaElement.EOS_NO_ERROR);
   | }
   | 
   | ***** FULL CODE: *****
   | CONST chunkSize = Math.ceil(file.size / 5 /*number of Chunks */); // file is a video file
   | var video = document.querySelector('video');
   | · · video.src = video.webkitMediaSourceURL;
   | · · video.addEventListener('webkitsourceopen', function(e) {
   | · · · · for (var i = 0; i < NUM_CHUNKS; ++i) {
   | · · · · · · var startByte = chunkSize * i;
   | · · · · · · var chunk = file.slice(startByte, startByte + chunkSize); // get slice
   | · · · · · · var reader = new FileReader();
   | · · · · · · reader.onload = (function(idx) {
   | · · · · · · · · return function(e) {
   | · · · · · · · · · · video.webkitSourceAppend(new Uint8Array(e.target.result)); // appending chunk:
   | · · · · · · · · · · if (idx == NUM_CHUNKS - 1) {
   | · · · · · · · · · ·   video.webkitSourceEndOfStream(HTMLMediaElement.EOS_NO_ERROR);
   | · · · · · · · · · · // appending chunk:
   | · · · · · · · · · · }
   | · · · · · · · · };
   | · · · · · · })(i);
   | · · · · · · reader.readAsArrayBuffer(chunk);
   | · · · · }
   | · · }, false);
   | 
   | splits video into chunks, then "stream" to a <video> tag by appending each chunk to the element using the MediaSource API.                                                         
   | 
   | If you're interested in learning more about the API, see the specification.
   | 
   | Support: Currently, the MediaSource API is only available in Chrome Dev Channel 17+ with the --enable-media-source flag set or enabled via about:flags.
   | 
   | CONST chunkSize = Math.ceil(file.size / 5 /*number of Chunks */); // file is a video file

- http://www.w3.org/2010/05/video/mediaevents.html

- http://stackoverflow.com/questions/14317179/display-a-video-from-a-blob-javascript
  var reader = new FileReader();
  reader.readAsDataURL(vid);
  
  function display(vid){
      var video = document.getElementById("video");
      video.src = window.URL.createObjectURL(vid);
  
  }

- http://html5doctor.com/video-canvas-magic/
  http://html5doctor.com/demos/video-canvas-magic/demo2.html
  https://developer.mozilla.org/en-US/docs/Web/HTML/Manipulating_video_using_canvas

__________________________
Real Time:
  - http://en.wikipedia.org/wiki/Operational_transformation
  - http://sharejs.org/
____________________
https://hackaday.com/2017/04/04/the-shocking-truth-about-transformerless-power-supplies/
____________
Tessel:
https://tessel.io/
Placa para domótica con sensores movimiento, lud, relay, temperatura, ...
programable en Python, Javascript y Rust
}}}
__________________
IoT Edge Computing:
- https://azure.microsoft.com/en-us/services/iot-edge/
- https://www.infoq.com/news/2019/01/baidu-edge-platform-opensource
__________________
IoT + Blockchain:
- https://www.infoq.com/news/2019/01/ockam-blockchain-iot-identity
  Ockam is a serverless platform that aims to make it easier for IoT
  developers to add blockchain-based identity, trust, and interoperability
  in their IoT devices. Ockam has recently open sources its SDK for Golang.

  By embedding the Ockam SDK into their devices, developers can make them
  part of the Ockam blockchain network, a decentralized, open platform that
  enables secure cryptographic identity management based on a recent W3C
  standard called Decentralized Identifiers (DID).

___________________________
https://www.adslzone.net/2019/01/15/wiliot-bluetooth-sin-bateria/amp/
Crean un chip Bluetooth que no necesita batería: ¿cómo lo han hecho?
Wiliot: creadora del chip Bluetooth que no necesita batería
___________________________________
https://www.xataka.com/internet-of-things/bluetooth-5-1-oficial-ahora-dispositivos-podran-conocer-ubicacion-casi-exacta-senal-bluetooth
_________
https://en.m.wikipedia.org/wiki/Radio-frequency_identification
_
-->

</html>
