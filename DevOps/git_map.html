<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <title>Git map (draft)</title>
<head>
<script src="../map_v1.js"></script>
<link rel="stylesheet" type="text/css" href="../map_v1.css" />
</head>

<body>

<table>
<tr>
<td>
  <spam xsmall>Setup git client</a>
<pre xxxsmall zoom>
*Make git branch appear on the shell prompt :* (☜strongly recomended)
 - Next trick works only on bash-alike shells.

 - Add a line similar to next one into your $HOME/.bashrc:
   # Ex 1:  Us git branch in your prompt
   export PS1="\\w:\$(git branch 2>/dev/null | grep '^*')\$ " 
                    └───     show git branch ───────────┘

   # Ex 2: "complex" PS1.
   PS1="\h[\$(git branch 2>/dev/null | grep ^\* | sed 's/\*/branch:/')]@\$(pwd |rev| awk -F / '{print \$1,\$2}' | rev | sed s_\ _/_) \$ "
            └─────────────     show git branch    ───────────────────┘   └────────────── show current and parent dir. only ────────┘

  NOTE: The bash syntax $(... command ...) will replace  
        the standard output of the ...command... inside parenthesis
        as the value of the variable (PS1 in this case)


*Set Remote ssh git repository with custom SSH settings (port, keys, ...)*
 <a href="https://stackoverflow.com/questions/5767850/git-on-custom-ssh-port/50854760#50854760">REF@stackoverflow</a> 
 - Use *GIT_SSH_COMMAND* environment variable to add non-standard
   options needed by the ssh client (port, priv.key, IPv6, PKCS#11 device, ...).
 
 - Ex: access ssh on non-standard o*1234* port and g*~/.ssh/myGitPrivate_rsa.key* private key
   $ export GIT_SSH_COMMAND="ssh o*-oPort=1234* g*-i ~/.ssh/myGitPrivate_rsa.key*"
   $ git clone myuser@myGitRemoteServer:/my/remote/git_repo/path
</pre>

  <a xsmall href="XXX">Init bare ("origin") repo</a>
<pre xxxsmall zoom>
$ cd anyPathInFileSystem      ← Probably one used for git "origin" repos, where backups have 
                                been setup properly
$ mkdir myRepo.git            
$ chgrp workGroup myRepo.git  ← Group of users accesing this repository.
$ cd myRepo.git               ← .git extension is a convention for bare dirs
$ <b>git init --bare  \ </b>         ← --bare : will not contain working copy of source files.
  <b>  ← --shared=group</b>                     only used to share with (remote|local) origin
                               : --shared=group fixed permissions for group.
</pre>
  
  <a xsmall href="XXX"> Init working copy</a>
<pre xxxsmall zoom>
$ cd $HOME/...pathToMyProject
$ git clone ..../myRepo.git          ← Clone local file-system bare repository
            ^^^^^^^^^^^^^^^
            path to bare ("origin") directory
$ git clone https://..../myRepo.git  ← Clone remote https repository (gogs, github, ...)
</pre>
  <a xsmall href="XXX">Common flow</a>
<pre xxxsmall zoom>
  Flow 1: no one else pushed changed before our push)
"edit" ─→ git status ─→ git add . ─→ git commit ─→ git push
  Flow 2: someone else pushed changed before our push, no conflicts
"edit" ─→ git status ─→ git add . ─→ git commit ─→ git pull  ─→ git push
  Flow 3: someone else pushed changed before our push, with conflicts
"edit" ─→ git status ─→ git add . ─→ git commit ─→ git pull  ─→ "fix conflicts" ─→ git add ─→ git commit ─→ git push
              ^             ^              ^            ^          ^                   ^          ^             ^
              │             │              │            │          │                   │          │             │
              │         add file/s         │        pull remote    │             once fixed       │    push to remote 
              │         to next commit     │        changes from   │             add again for    │    repository
              │                            │        other users    │             next commit      │    (origin,...)
              │                            │                       │                              │                
          display changes               commit                   manually edit                 Commit to
          pending to commit             new version              conflicting changes           merge

  Flow 4: Amend local commit
"edit" ─→ git status ─→ git add . ─→ git commit ─→ git commit ─amend ─→ ... ─→ git commit ─→ git push
</pre>
  <a xsmall TODO href="XXX">History</a>
<pre xxxsmall zoom>
$ git log  
$ git log -p "path/to/some/given/file" 
$ git blame "path/to/some/given/file"  ← Who changed what, when in some file
</pre>


  <a xsmall TODO href="XXX">branching</a>
<pre xxxsmall zoom>
Change branch (checkout)
$ git checkout -b newBranch       ← -b: creates branch
$ git checkout    existingBranch     
$ git branch -av                  ←  List (-a)ll existing branches
$ git branch -d branchToDelete    ← -d: Delete branch

$ git checkout --track "remote/branch"  ← Create  new tracking branch (TODO)


</pre>


</td>
<td>
  
  <a xsmall TODO href="XXX">Comparing diffs</a>  
<pre xxxsmall zoom>
</pre>
</td>
<td>
<a xsmall TODO href="https://gogs.io/">git grep</a>
<pre xxxsmall zoom>
- how to use it to locate information within a Git repository.
</pre>
</td>

<td>
<a xsmall TODO href="">Tags</a>
<pre xxxsmall zoom>

$ git tag                 ← List tags
→ ...
→ v2.1.0-rc.2
→ v2.1.1
→ v2.1.2
→ ...
$ git tag -a v1.4 -m "..." ← Create annotated tag (recomended)
                                    ^^^^^^^^^
                                - stored as full objects in Git database.
                                - They’re checksummed; contain the tagger name,
                                - email, and date; have a tagging message (-m).
                                - can be signed and verified with GPG.

$ git tag v1.4-lw          ← Create lightweight tag
                                    ^^^^^^^^^^^    
                                  - "alias" for a commit checksum stored in a file
                                  - No other info is kept.

$ git tag -a v1.2 9fceb02  ← Tag some commit in history

<b>Sharing Tags</b>
WARN: git push command doesn’t transfer tags to remote servers. 


$ git push origin v1.5    ← Share/push tag to remote repo

$ git push origin --tags  ← Share/push all the tags

$ git tag -d v1.4-lw      ← Delete local tag (remote tags will persist)

$ git push origin --delete v1.4-lw    ← Delete remote tag. Alt 1
$ git push origin :refs/tags/v1.4-lw  ← Delete remote tag. Alt 2
                  ^^^^^^^^^^^^^^^^^^
                  null value before the colon is
                  being pushed to the remote tag name,
                  effectively deleting it.


$ git checkout v1.4-lw          ← Move back to (DETACHED) commit

$ git show-ref --tags    ← Map tag to commit
→ ...
→ 75509731d28ddbbb6f6cbec6e6b50aeaa413df69 refs/tags/v2.1.0-rc.2
→ 8fc0a3af313d9372fc9b8d3e5dc57b804df0588e refs/tags/v2.1.1
→ 3e1f5b0d4d081db7b40f9817c060ee7220a51633 refs/tags/v2.1.2
→ ...
</pre>
</td>
<td>
  <a xsmall todo href="xxx">Filter-branch</a>
<pre xxxsmall zoom>
- rewrite history in Git using several of the built-in filters that the command provides.   
  - rev-list command, which provides a way to list out revisions based on a range or criteria.
  - filter-branch: split a subdirectory into a separate repository
  - how to use to use filter-branch to delete a file from all versions in a repository 
    and change the email address on versions in Git history
</pre>
</td>
<td>
<a xsmall TODO href="https://opensource.com/article/18/11/gitbase">gitbase</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
<a xsmall TODO href="https://www.systutorials.com/2845/how-to-revert-changes-in-git/">Revert Changes</a>
<pre xxxsmall zoom>
</pre>
</td>



</tr>
</table>
 DevOps
<table>
</tr>
<td>
<a xsmall TODO href="https://gogs.io/">painless self-hosted Git service</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
<a xsmall TODO href="https://git-lfs.github.com/">Git LFS (Large Files extension)</a>
<pre xxxsmall zoom>
- Git Large File Storage (LFS) replaces large files such as audio samples,
  videos, datasets, and graphics with text pointers inside Git, while storing 
  the file contents on a remote server like GitHub.com or GitHub Enterprise
</pre>
</td>
<td>
<a xsmall TODO href="https://www.linuxtoday.com/security/4-secrets-management-tools-for-git-encryption-190219145031.html">4 secrets encryption tools </a>
<pre xxxsmall zoom>
</pre>
</td>


</tr>
</table>

 Advanced
<table>
</tr>
<td>
  <a xsmall TODO href="XXX">revert/rerere</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
  <a xsmall todo href="xxx">bisect</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
  <a xsmall todo href="xxx">Submodules</a>
<pre xxxsmall zoom>
</pre>
</td>
<td>
  <a xsmall todo href="xxx">Subtrees</a>
<pre xxxsmall zoom>
- TODO: how subtrees differ from submodules
   - how to use the subtree to create a new project from split content
</pre>
</td>

<td>
  <a xsmall todo href="xxx">Interactive rebase:</a>
<pre xxxsmall zoom>
-  how to rebase functionality to alter commits in various ways.
   - how to squash multiple commits down into one. 
</pre>
</td>
<td>
<a xsmall TODO href="XXX">Supporting files:</a>
<pre xxxsmall zoom>
- Git attributes file and how it can be used to identify binary files,
  specify line endings for file types, implement custom filters, and 
  have Git ignore specific file paths during merging.
</pre>
</td>
<td>
<a xsmall TODO href="https://www.linux.com/blog/2018/11/cregit-token-level-blame-information-linux-kernel">Cregit token level blame</a>
<pre xxxsmall zoom>
cregit: Token-Level Blame Information for the Linux Kernel
Blame tracks lines not tokens, cgregit blames on tokens (inside a line)
</pre>
</td>


</tr>
</table>

</body>
<!--
TODO_START: {
https://github.com/Microsoft/VFSForGit
https://vfsforgit.org/
Virtual File System for Git: Enable Git at Enterprise Scale 

}
-->

</html>
