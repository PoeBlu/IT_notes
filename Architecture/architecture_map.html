<!DOCTYPE html>
<html>
   <meta charset="UTF-8">
   <title>architecture map (alpha)</title>
<head>
<script src="/IT_notes/map_v1.js"></script>
<link rel="stylesheet" type="text/css" href="/IT_notes/map_v1.css" />
</head>

<body>

<table>
<tr>
<td>
  DB Engines Types (key/value, RDBMS, TimeSeries,...)
<pre xxxsmall zoom>
REF:
- <a href="https://db-engines.com/">db-engines.com</a>
- <a href="https://db-engines.com/en/ranking">ussage Ranking</a>
- <a href="https://dzone.com/articles/rant-there-is-no-nosql-data-storage-engine">REF: "There is no NoSQL data storage</a>
*RDBMS*                                         | *KEY-VALUE STORES*                             | *Time Series DBMS*
*Features*                                      | -*simplest*form of DBMS.                       | - Managing time series data
- support E-R data model.                       | - store pairs of keys and values               | - very high TX load:
- table schema defined by the                   | -*high performance*                            |   - designed to efficiently collect,
  table name and fixed number                   | - not adequate for complex apps                |     store and query various time
  of attributes and data types.                 | - extended forms allows to sort the            |     series.
- A record (=entity) corresponds                |   keys, enabling range queries as well         | - Ex use-case:
  to a row in the table.                        |   as an ordered processing of keys.            |   SELECT SENSOR1_CPU_FREQUENCY / SENSOR2_HEAT'
- basic operations are defined on               | - Can evolve to document stores and            |   joins two time series based on the
  the tables/relations:                         |   wide column stores.                          |   overlapping areas of time providing
  - CRUD: Create/Read/Update/Delete             |                                                |   new time-serie
  - set ops: union|intersect|difference         | *Examples*                                     |
  - subset selection defined by filters         | - Redis                                        | *Examples*
  - Projection of subset of table columns       | - Amazon DynamoDB                              | - Timescale.com
  - JOIN: combination of:                       | - Memcached                                    |   - PostgreSQL optimized for Time Series.
    Cartesian_product+selection+projection      | - Microsoft Azure Cosmos DB                    |     by modifying the insert path,
  - TX ACID control                             | - Hazelcast                                    |     execution engine, and query planner
  - user management                             | - LabelDB ("Ethereum State")                   |     to "intelligently" process queries
- Ops defined in  standard SQL                  | - TiKV                                         |     across chunks.
*History*                                       |   - dev lang:*Rust*                            | - InfluxDB
- beginning of 1980s                            |   - Incubation Kubernetes project              | - Kdb+
- Most widely used DBMS                         |   - used also for TiDB                         | - Graphite. Simple system that will just:
                                                                                                 |   - Store numeric time series data
*Main  Examples*                                                                                 |   - Render graphs of this data
- Oracle                                                                                         |   It will*NOT*:
- MySQL                                                                                          |   - collect data (Carbon needed)
- TiDB                                                                                           |   - render graphs (external apps exists)
  - MySQL compatible                                                                             | - RRDtool
  - RAFT-distributed                            | *Search Engines*                               | - Prometheus
  - Rust/go written                             | - "NoSQL" DBMS for search of content           |   - https://prometheus.io/
  - Features:                                   | - Optimized for:                               |   - CNCF project,*kubernetes friendly*
    - "infinite" horizontal scalability         |   - complex search expressions                 |   - GoLang based:
    - strong consistency                        |   - Full text search                           |     - binaries statically linked
    - HA                                        |   - reducing words to stem                     |     - easy to deploy.
- SQL Server                                    |   - Ranking and grouping of results            |   - Many client libraries.
- PostgreSQL                                    |   - Geospatial search                          |   - monitoring metrics analyzer
- DB2                                           |   - Distributed search for high                |     and alerting
- Hive (https://db-engines.com/en/system/Hive)  |     scalability                                |   - Highly dimensional data model.
  - Home: https://hive.apache.org/              | *Examples*                                     |     Time series are identified by a
  - r*WARN*: No Foreign keys, NO ACID           | - Elasticsearch                                |     metric name and a set of
  -*Eventual Consistency*                       | - Splunk                                       |     key-value pairs.
  - Data Warehouse designed for Hadoop          | - Solr                                         |   - stores all data as time series:
  - Implemented in Java                         | - MarkLogic                                    |     streams of timestamped values
  - supports analysis of large datasets         | - Sphinx                                       |     belonging to same metric and
    stored in Hadoop's HDFS and                 | - Eclipse Hawk:                                |     same set of labeled dimensions.
    compatible file systems such as             |   projects.eclipse.org/projects/modeling.hawk  |   - Multi-mode data visualization.
    Amazon S2 filesystem.                       |   heterogeneous model indexing framework:      |   - Grafana integration
  - SQL-like DML and DDL statements             |   - indexes collections of models              |   - Built-in expression browser.
    Traditional SQL queries implemented in      |     transparently and incrementally into       |   - PromQL Query language allowing
    MapReduce Java API to  execute SQL apps:    |     NoSQL DDBB, which can be queried           |     to select+aggregate time-series
    - necessary SQL abstraction provided to     |     efficiently.                               |     data in real time.
      integrate SQL-like queries (HiveQL) into  |   - can mirror EMF, UML or Modelio             |     - result can either be shown as
      the underlying Java without the need      |     models (among others) into a Neo4j or      |       graph, tabular data or consumed
      for low-level queries.                    |     OrientDB graph, that can be queried        |       by external HTTP API.
  - Hive aids portability of SQL-based apps     |     with native languages, or Hawk ones.       |   - Precise alerts based on PromQL.
    to Hadoop                                   |     Hawk will watch models and update          |   - scaling:
  - JDBC, ODBC, Thrift                          |     the graph incrementally on change.         |     - sharding
                                                                                                 |     - federation
                                                                                                 |   - "Singleton" servers relying only
                                                                                                 |     on local storage.
                                                                                                 |     (optionally remote storage).
                                                                                                 |
   | *RDF stores*                               | *Graph DBMS*                                   | - Uber M3
   | db-engines.com/en/article/RDF+Stores       | - represent data in graph structures           |   www.infoq.com/news/2018/08/uber-metrics-m3
   | - Resource Description Framework stores    |   of nodes and edges (relations).              |   - Large Scale Metrics Platform
   |   *describes information in triplets:*     | - easy processing, simple calculation          | """ built to replace Graphite+Carbon cluster,
   |  *(subject,predicate,object)*              |   of specific graph properties:                |     and Nagios for alerting and Grafana for
   | - Originally used for describing           |   - number of steps needed to                  |     dashboarding due to issues like
   |   IT-resources-metadata.                   |     get from one node to another node          |     poor resiliency/clustering, operational
   | - Today often used in semantic web.        | - (usually) DON'T provide indexes on           |     cost to expand the Carbon cluster,
   | - RDS is a subclass of graph DBMS:         |   all nodes. Direct access to                  |     and a lack of replication""".
   |   (subject,predicate,object)               |   nodes based on attribute values              |   *Features*
   |    ^          ^      ^                     |   is not possible                              |   - cluster management, aggregation,
   |    node      edge   node                   | *Examples*                                     |     collection, storage management,
   |   but it offer specific methods            | - Neo4j                                        |     a distributed TSDB
   |   beyond general graph DBMS ones. Ex:      | - Azure Cosmos DB                              |   - M3QL query language (with features
   |   SPARQL, SQL-like query lang. for         | - Datastax Enterprise                          |     not available in PromQL).
   |   RDF data, supported by most              | - OrientDB                                     |   - tagging of metrics.
   |   RDF stores.                              | - ArangoDB                                     |   - local/remote integration similar to
   |                                                                                             |     the Prometheus Thanos extension providing
   | *Examples*                                                                                  |     cross-cluster federation, unlimited
   | - MarkLogic                                                                                 |     storage and global querying across
   | - Jena                                                                                      |     clusters, works.
   | - Virtuoso                                                                                  |   - query engine: single global view
   | - Amazon Neptune                                                                            |     without cross region replication.
   | - GraphDB





|*Document Stores*                                   | *Wide Column Stores*                         |*Service Registration*
|- also called document-oriented DBMS                | (also called extensible record stores)       | *and Discovery*
|- schema-free:                                      | - store data in records                      |
|  - different records may have                      | - ability to hold very large numbers         | - Specialized key/value DBMS:
|    different columns                               |   of dynamic columns.                        |   -*two processes must exists*:
|  - values of individual columns                    |   - column names and record keys             |     -*Service registration process*
|    can have dif. types                             |    *are not fixed*                           |       storing final-app-service
|- Columns can be multi-value                        |     ^^^^^^^^^^^^^                            |       (host,port,...)
|- Records can have a nested structure               |     (schema-free)                            |     -*Service discovery process*
|- Often use internal notations,                     | - a record can have billions of              |       - let final-app-services query
|  mostly JSON.                                      |   columns.                                   |         the data
|- features:                                         | -*short of two-dimensional*                  |   - other aspects to consider:
|  - secondary indexes in (JSON) objects             |  *key-value stores.       *                  |     - auto-delete of non-available services
|                                                    | - not to be confused with                    |     - Support for replicated services
|*Examples*                                          |   column oriented storage of RDMS            |     - Remote API is provided
|- MongoDB                                           |   (last one is an internal concept           |
|  www.infoq.com/articles/Starting-With-MongoDB      |   for improving performance storing          | *Examples*
|  14 Things I Wish I’d Known When Starting with     |   table-data column-by-column vs             | - ZooKeeper
|  MongoDB                                           |   record-by-record)                          |   - originated from Hadoop ecosystem.
|- Amazon DynamoDB                                   | *Examples*                                   |   - data-format similar to file system.
|- Couchbase                                         | - Cassandra                                  |   - cluster mode.
|- Cosmos DB                                         |   - SQL-like SELECT, DML and DDL             |   - Disadvantages:
|- CouchDB                                           |     statements (CQL)                         |     - complex:
                                                     |   - Designed to handle large amounts         |     - Java plus big number of dependencies
                                                     |     of data across many commodity            |   - Still used by kafka for config but
                                                     |     servers, providing high availability     |     plans exists to replace it.
                                                     |     with no single point of failure.         |     issues.apache.org/jira/browse/KAFKA-6598
                                                     |   - robust support for clusters              | - etcd
                                                     |     spanning multiple datacenters,           |   - distributed key/value store
                                                     |     with asynchronous masterless             |   - HTTP remote API.
                                                     |     replication allowing low latency         |   - hierarchical config.
                                                     |     operations for all clients.              |   - Very easy to deploy, setup and use
                                                     |   - Related:                                 |   - reliable data persistence
                                                     |     www.infoq.com/news/2018/10/spotify-cstar |   - very good doc
                                                     |     Spotify Open Sources cstar,              |   - coreos.com/blog/introducing-zetcd
                                                     |     its Cassandra Orchestration Tool:        |   Disadvantages:
                                                     |     ... Cstar emerged from the necessity     |   - needs to be combined with few
                                                     |     of running shell commands in Cassandra   |     third-party tools for  serv.discover:
                                                     |     nodes                                    |     - etcd-registrator: keep updated  list
                                                     |   -*Integrated Managed Data    *             |                       of docker containers
                                                     |    *Layer Solutions with Spark,*             |     - etcd-registrator-confd: keep updated
                                                     |    *Kafka and Elasticsearch.   *             |                               config files
                                                     |                                              |     - ...
                                                     | - Scylla                                     |   - Used by Kubernetes for config
                                                     |   - compatible with Cassandra                |
                                                     |     (same CQL and Thrift protocols,          | - Consul
                                                     |      and same SSTable file formats)          |   - strongly consistent datastore
                                                     |     with  higher throughputs and             |   - multidatacenter gossip protocol
                                                     |     lower latencies (10x).                   |     for dynamic clusters
                                                     |   - C++14 (vs Cassandra Java)                |   - hierarchical key/value store
                                                     |   -*Seastar async lib replacing threads*     |   - adds the notion of app-service
                                                     |   - sharded design by node:                  |     (and app-service-data).
                                                     |     - each CPU core handles a data-subset    |     - "watches" can be used for:
                                                     |     - authors claim to achieve much better   |       - sending notifications of
                                                     |       performance on modern NUMA SMP archs,  |         data changes
                                                     |       and to scale very well with the number |       - (HTTP, TTLs , custom)
                                                     |       of cores:                              |         health checks and
                                                     |       -*Up to 2 million req/sec per machine* |         output-dependent
                                                     | - HBase                                      |         commands
                                                     | _ CosmosDB                                   |
                                                     | REF: Google bigTable-osdi06.pdf              |   - embedded service discovery:
                                                                                                    |     no need to use third-party one
                                                                                                    |     (like etcd). Discovery includes:
                                                                                                    |     - node         health checks
                                                                                                    |     - app-services health checks
                                                                                                    |     - ...
                                                                                                    |   - Consul provides a built in framework
                                                                                                    |     for service discovery.
                                                                                                    |     (vs etcd basic key/value + custom code)
                                                                                                    |     - Clients just register services and
                                                                                                    |       perform discovery using the DNS
                                                                                                    |       or HTTP interface.
                                                                                                    |   - out of the box native support for
                                                                                                    |     multiple datacenters.
                                                                                                    |   - template-support for config files.
                                                                                                    |   - Web UI: display all services and nodes,
                                                                                                    |     monitor health checks, switch
                                                                                                    |     from one datacenter to another.
                                                                                                    | - doozerd (TODO)
                                                                                                    | See also:
                                                                                                    | - Comparision chart:
                                                                                                    | coreos.com/etcd/docs/latest/learning/why.html










*Related*
- https://www.infoq.com/news/2018/09/pinterest-goku-timeseries-db
  Pinterest Switches from OpenTSDB to Their Own Time Series Database
- https://facebook.github.io/prophet/
  Prophet: TSDB forecasting library (wrapper around Stan), particularly
  approachable place to use Bayesian Inference for forecasting use cases
  general purpose.
  - Prophet is a procedure for forecasting time series data based on an
    additive model where non-linear trends are fit with yearly, weekly, and daily
    seasonality, plus holiday effects. It works best with time series that have
    strong seasonal effects and several seasons of historical data. Prophet is
    robust to missing data and shifts in the trend, and typically handles outliers well.




technologyconversations.com/2015/09/08/service-discovery-zookeeper-vs-etcd-vs-consul/
</pre>
<td>
  Data(log) collect
<pre xxxsmall zoom>
*FluentD*                                     |*Logstash* 
 "Improved" logstat                           |- The*L* in ELK
 - https://www.fluentd.org/                   |-*OS data Collector
 - data collector for unified logging layer   |- TODO:
 - increasingly used Docker, GCP,             |  osquery.readthedocs.io/en/stable/
   and Elasticsearch communities              |- low-level instrumentation framework 
 - https://logz.io/blog/fluentd-logstash      |  with system analytics and monitoring
   FluentD vs Logstash compared               |  both performant and intuitive.
*Features*                                    |- osquery exposes an operating system
 - unify data collection and consumption      |  as a high-performance SQL RDMS:
   for better understanding of data.          |  - SQL tables represent concepts such
                                              |    as running processes, loaded kernel
                                              |    modules, open network connections,
Syslog                      Elasticsearch     |    browser plugins, hardware events
Apache/Nginx logs    → → →  MongoDB           |*Features:*
Mobile/Web app logs  → → →  Hadoop            |  - File Integrity Monitoring (FIM):
Sensors/IoT                 AWS, GCP, ...     |  - DNS
                                              |  - *1

*1: https://medium.com/palantir/osquery-across-the-enterprise-3c3c9d13ec55



|*Prometheus Node Exporter*                     |*Others*
|- https://github.com/prometheus/node_exporter  |- collectd
|- TODO:                                        |- Dynatrace OneAgent
                                                |- Datadog agent
                                                |- New Relic agent
                                                |- Ganglia gmond
                                                |- ...
</pre>
  <a xsmall TODO href="https://opensource.com/article/18/9/quiet-log-noise-python-and-machine-learning">Logreduce IA filter</a>
<pre xxxsmall zoom TODO>
  - <a href=https://pypi.org/project/logreduce/">logreduce@pypi</a>
  - Quiet log noise with Python and machine learning
</pre>
</td>
<td>
  <span xsmall TODO>Streams</span>
<pre xxxsmall zoom>
Distributed (<a href="https://martinfowler.com/eaaDev/EventSourcing.html">Event</a>) Stream Processors
REF:
- <a href="https://en.wikipedia.org/wiki/Stream_processing">Stream_processing@Wikipedia</a>
- <a href="https://iwringer.wordpress.com/2015/08/03/patterns-for-streaming-realtime-analytics/">Patterns for streaming realtime anaylitics</a>
- <a href="https://www.infoq.com/streaming?utm_source=infoqEmail&utm_medium=editorial&utm_campaign=SpecialNL&utm_content=05182018">???</a>
- <a href="https://www.infoq.com/presentations/squbs?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Streaming Reactive Systems & Data Pites w. Squbs</a>
- <a href="https://www.infoq.com/presentations/sql-streaming?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Streaming SQL Foundations: Why I Love Streams+Tables </a>
- <a href="https://www.infoq.com/presentations/flink-stateful-streaming?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Next Steps in Stateful Streaming with Apache Flink</a>
- <a href="https://www.infoq.com/presentations/kafka-streams-spring-cloud?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Kafka Streams - from the Ground Up to the Cloud </a>
- <a href="https://www.infoq.com/presentations/facebook-stream-processing?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Data Decisions with Real-Time Stream Processing</a>
- <a href="https://www.infoq.com/presentations/beam-model-stream-table=theory?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Foundations of streamng SQL</a>
- <a href="https://www.infoq.com/presentations/distributed-stream-processing-flink?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">The Power of Distributed Snapshots in Apache Flink</a>
- <a href="https://www.infoq.com/presentations/sql-streams-panel?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Panel: SQL over Streams, Ask the Experts</a>
- <a href="https://www.infoq.com/presentations/hbc-digital-streaming?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Survival of the Fittest - Streaming Architectures</a>
- <a href="https://www.infoq.com/presentations/netflix-personalization-datasets-streaming?utm_source=presentations_about_Streaming&utm_medium=link&utm_campaign=Streaming">Streaming for Personalization Datasets at Netflix</a>
- < href="https://www.safaribooksonline.com/library/view/an-introduction-to/9781491934951/">An Introduction to Time Series with Team Apache </a>
""" Apache Cassandra evangelist Patrick McFadin shows how to solve time-series data
    problems with technologies from Team Apache: Kafka, Spark and Cassandra.
      - Kafka: handle real-time data feeds with this "message broker"
      - Spark: parallel processing framework that can quickly and efficiently
               analyze massive amounts of data
      - Spark Streaming: perform effective stream analysis by ingesting data 
               in micro-batches
      - Cassandra: distributed database where scaling and uptime are critical
      - Cassandra Query Language (CQL): navigate create/update your data and data-models
      - Spark+Cassandra: perform expressive analytics over large volumes of data

|*Kafka*@[./kafka_map.html]                             | *Spark* (TODO)
|-@[https://kafka.apache.org]                           | @[http://spark.apache.org/]
|- scalable,persistent and fault-tolerant               | - Zeppelin "Spark Notebook"(video):
|  real-time log/event processing cluster.              | @[https://www.youtube.com/watch?v=CfhYFqNyjGc]
|- It's NOT a real stream processor  but a              | 
|  broker/message-bus to store stream data              | 
|  for comsuption.                                      | 
|- "Kafka stream" can be use to add                     | 
|  data-stream-processor capabilities                   | 
|- Main use cases:                                      | 
|  - real-time reliable streaming data                  | *Flink* TODO
|    pipelines between applications                     | - Includes a powerful windowing system
|  - real-time streaming applications                   |   supports many types of windows:
|    that transform or react to the                     |   - Stream windows and win.aggregations are crucial
|    streams of data                                    |     building block for analyzing data streams.
|- Each node-broker in the cluster has an               |
|  identity which can be used to find other             |
|  brokers in the cluster. The brokers also             |
|  need some type of a database to store                |
|  partition logs.                                      |
|-@[http://kafka.apache.org/uses]                       |
|  (Popular) Use cases                                  |
|  b*Messaging*: good replacement for traditional       |
|    message brokers decoupling processing from         |
|    data producers, buffering unprocessed messages,    |
|    ...) with better throughput, built-in              |
|    partitioning, replication, and fault-tolerance     |
|  b*Website Activity Tracking*(original use case)      |
|    Page views, searches, ... are published            |
|    to central topics with one topic per activity      |
|    type.                                              |
|  b*Metrics* operational monitoring data.              |
|  b*Log Aggregation* replacement.                      |
|    - Group logs from different servers in a central   |
|      place.                                           |
|    - Kafka abstracts away the details of files and    |
|      gives a cleaner abstraction of logs/events as    |
|      a stream of messages allowing for lower-latency  |
|      processing and easier support for multiple data  |
|      sources and distributed data consumption.        |
|      When compared to log-centric systems like        |
|      Scribe or Flume, Kafka offers equally good       |
|      performance, stronger durability guarantees due  |
|      to replication, and much lower end-to-end        |
|      latency.                                         |
|  b*Stream Processing*: processing pipelines           |
|    consisting of multiple stages, where raw input     |
|    data is consumed from Kafka topics and then        |
|    aggregated/enriched/transformed into new           |
|    topics for further consumption.                    |
|    - Kafka 0.10.+ includes Kafka-Streams to           |
|      easify this pipeline process.                    |
|    - alternative open source stream processing        |
|      tools include Apache Storm and Samza.            |
|  b*Event Sourcing architecture*: state changes        |
|    are logged as a time-ordered sequence of           |
|    records.                                           |
|  b*External Commit Log for distributed systems*:      |
|    - The log helps replicate data between             |
|      nodes and acts as a re-syncing mechanism         |
|      for failed nodes to restore their data.          |

See also:
-Flink vs Spark Storm:
@[https://www.confluent.io/blog/apache-flink-apache-kafka-streams-comparison-guideline-users/]
Check also: <a href="https://data-artisans.com/blog/serializable-acid-transactions-on-streaming-data">Streaming Ledger</a>. Stream ACID TXs on top of Flink
</pre>
</td>
<td>
   <span TODO xsmall>Text indexing/Search</span>
<pre xxxsmall zoom>
*Elasticsearch*
@[https://www.elastic.co/products/elasticsearch]
- distributed, RESTful (all-document-type) search 
  and analytics engine
- Implemented on top of Lucene
- Developed alongside a data-collection and
  log-parsing engine called Logstash, and the 
  analytics and visualisation platform  Kibana.
  - The three products form the "Elastic Stack" 
    (formerly the "ELK stack"
  - At the heart of the ELK Stack, data is 
    stored centrally
</pre>
</td>
<td>
    Data Routing
<pre xxxsmall zoom>
*Apache NiFi*
@[https://nifi.apache.org]
- Web-GUI data route+transform
- scalable directed graphs of data routing,
  transformation, and system mediation logic.
- Seamless experience between design, control,
  feedback, and monitoring
- Highly configurable:
  - Loss tolerant vs guaranteed delivery
  - Low latency vs high throughput
  - Dynamic prioritization
  - Flow can be modified at runtime
  - Back pressure
- Data Provenance
  - Track dataflow from beginning to end
- Designed for extension
  - Build your own processors and more
  - Enables rapid development and 
    effective testing
- Secure
  - SSL, SSH, HTTPS, encrypted content, etc...
  - Multi-tenant authorization and internal
    authorization/policy management
REFS:
- NiFi+Spark:
@[https://blogs.apache.org/nifi/entry/stream_processing_nifi_and_spark"]
</pre>
</td>
<td>
  <span xsmall>Data visualization</span>
<pre xxxsmall zoom>
|*Kibana* (TODO)
|@[https://www.elastic.co/products/kibana]
|- "A Picture's Worth a Thousand Log Lines"
|- visualize (Elasticsearch) data and navigate
|  the Elastic Stack, learning  understanding 
|  the impact rain might have on your quarterly
|  numbers

*Grafana* (TODO)
@[https://grafana.com/]
- time series analytics
- Integrates with Prometheus queries
@[https://logz.io/blog/grafana-vs-kibana/]
</pre>
</td>
</tr>
</table>
<br/>
<hr/>

<table>
<tr>

</tr>
</table>
<br/>
<hr/>
<br/>
<table>
<tr>
  <th colspan=3 header_delimit xsmall >distributed cache</th>
  <td colsep ></td>
  <th colspan=1 header_delimit xsmall >Local InMemory Cache</th>
</tr>
<tr>
<td>
  <a href="https://www.memcached.org/">Memcached</a><br/>
  distributed memory object caching system
.
  <ul xxxsmall>
  <li>Memcached servers are unaware of each other. There is no crosstalk, no
     syncronization, no broadcasting, no replication. Adding servers increases
     the available memory. Cache invalidation is simplified, as clients delete
     or overwrite data on the server which owns it directly</li>
  <li>initially intended to speed up dynamic web applications alleviating database load</li>
  </ul>

  <a href="https://github.com/magro/memcached-session-manager">
    Memcached-session-manager</a>
  tomcat HA/scalable/fault-tolerant session manager
  <ul xxxsmall>
  <li>supports sticky and non-sticky configurations</li>
  <li>Failover is supported via migration of sessions</li>
  </ul>
</td>
<td><a href="https://redis.io/">Redis</a>
  in-memory data structure store, used as a database, cache and message broker
  <ul xxxsmall zoom >
  <li>supports data structures such as strings, hashes, lists, sets, sorted sets
    with range queries, bitmaps, hyperloglogs and geospatial indexes with radius queries</li>
  <li>Redis has built-in replication, Lua scripting, LRU eviction, transactions
    and different levels of on-disk persistence, and provides high availability
    via Redis Sentinel and automatic partitioning with Redis Cluster</li>
  </ul>
  <hr/>
  <a href="https://en.wikipedia.org/wiki/Hazelcast">Hazelcast</a>, in-memory data grid based on Java
</td>
</td>
<td>
  <a href="http://www.ehcache.org/">Ehcache</a>
  <ul xxxsmall zoom >
  <li>Can be used as tcp service (distributed cache) or process-embedded<br/>
    <span TODO>Same API for local and distributed objects?</span></li>
  <li>open source, standards-based cache that boosts performance, offloads I/O</li>
  <li>Integrates with other popular libraries and frameworks</li>
  <li>It scales from in-process caching, all the way to mixed in-process/out-of-process
  deployments with terabyte-sized caches</li>
  </ul>
<pre xxxsmall zoom { >
Coding to Ehcache 3 API:
CacheManager cacheManager = CacheManagerBuilder.newCacheManagerBuilder()
    .withCache("preConfigured",
         CacheConfigurationBuilder.newCacheConfigurationBuilder(Long.class, String.class,
             ResourcePoolsBuilder.heap(100))
         .build())
    .build(true);

Cache&lt;Long, String&gt; preConfigured
    = cacheManager.getCache("preConfigured", Long.class, String.class);

Cache&lt;Long, String&gt; myCache = cacheManager.createCache("myCache",
    CacheConfigurationBuilder.newCacheConfigurationBuilder(Long.class, String.class,
                                  ResourcePoolsBuilder.heap(100)).build());

myCache.put(1L, "da one!");
String value = myCache.get(1L);

cacheManager.close();
</pre>
(simpler/lighter solution but not so escalable could be to use Google Guava Cache)
  <br/>
  <a href="http://jbosscache.jboss.org/">JBoss Cache</a>
</td>
<td colsep>
<td><a href="https://github.com/google/guava/wiki/CachesExplained">Guava Cache</a>
  <b>non-distributed</b> easy-to-use Java library for data caching
  <ul xxxsmall zoom >
  <li>A Cache is similar to ConcurrentMap, but not quite the same. The most
    fundamental difference is that a ConcurrentMap persists all elements that
    are added to it until they are explicitly removed. A Cache on the other
    hand is generally configured to evict entries automatically, in order to
    constrain its memory footprint. In some cases a LoadingCache can be useful
    even if it doesn't evict entries, due to its automatic cache loading.
  </li>
  </ul>
</td>
</tr>
</table>
<br/>
<hr/>
<br/>
<table>
<tr>
  <th colspan=4>Messaging</th>
  <th colsep></th>
  <th xsmall colspan=4>Distributed Storage. Related:<a href="http://www.time-travellers.org/shane/papers/NFS_considered_harmful.html">NFS considered harmful</a></th>
</tr>
<tr>
<td>
  Summary
  <ul xxxsmall zoom>
  <li>Messaging traditionally has two models: queuing and publish-subscribe. In a queue,
     a pool of consumers may read from a server and each record goes to one of them;
     in publish-subscribe the record is broadcast to all consumers. Each of these two
     models has a strength and a weakness. The strength of queuing is that it allows
     you to divide up the processing of data over multiple consumer instances, which
     lets you scale your processing. Unfortunately, queues aren't multi-subscriber—once
     one process reads the data it's gone. Publish-subscribe allows you broadcast data
     to multiple processes, but has no way of scaling processing since every message
     goes to every subscriber
  </li>
  </ul>


</td>
<td>
  <b>Message Queues</b>
  Defined by
  <ul xxxsmall zoom>
  <li>message oriented architecture</li>
  <li>Persistence (or durability until comsuption)</li>
  <li>queuing</li>
  <li>Routing: point-to-point / publish-and-subscribe</li>
  <li>No processing/transformation of message/data</li>
  </ul>
  Implementations
  <ul xxxsmall zoom>
  <li>
    <a href="https://en.wikipedia.org/wiki/Advanced_Message_Queuing_Protocol">AMQP</a>
    Open standard application layer protocol for message-oriented middleware. <br/>
    Often compared to JMS (Java Message Service): <br/>
    JMS defines the API interfaces, while AMQP defines the network protocol.<br/>
     JMS has no requirement for how messages are formed and transmitted and thus
    every JMS broker can implement the messages in a different (incompatible) format<br/>
     AMQP publishes its specifications in a downloadable XML format.
    This availability makes it easy for library maintainers to generate APIs
    driven by the specs while also automating construction of algorithms to
    marshal and demarshal messages.<br/>
     These advantages and the openness of the spec have inspired the creation of
     multiple brokers that support AMQP, including:<br/>
    RabbitMQ, ActiveMQ, Qpid, Solace<br/>
    <a href="https://www.amqp.org/about/examples">AMQP implementations</a>:
<pre>
<a href="http://qpid.apache.org/">Apache Qpid</a>
<a href="http://www.inetco.com/resource-library/technology-amqp/">INETCO's AMQP protocol analyzer</a>
<a href="http://joram.ow2.org/">JORAM</a>: open reliable asynchronous messaging, 100% pure Java implementation of JMS
<a href="http://kaazing.net/index.html">Kaazing's AMQP Web Client</a>
<a href="http://www.windowsazure.com/en-us/develop/net/how-to-guides/service-bus-amqp-overview/">Microsoft's Windows Azure Service Bus</a>
<a href="http://www.redhat.com/en/technologies/jboss-middleware/amq">JBoss&nbsp;A-MQ&nbsp;</a>, built from <a href="http://qpid.apache.org/">Qpid</a>
<a href="http://stormmq.com/">StormMQ</a> a cloud hosted messaging service based on AMQP
VMware Inc <a href="http://www.rabbitmq.com/">RabbitMQ</a>; also supported by SpringSource
<a href="https://developer.ibm.com/messaging/mq-light/">IBM MQlight</a>
...
</pre>
  </li>
  <li>Java JMS</li>
  <li>...</li>
  </ul>
</td>
<td>
  <b>Message Brokers</b>
  <ul xxxsmall zoom>
  <li>Routing</li>
  <li>(De-)Multiplexing of messages from/into multiple messages to different recipients</li>
  <li>Durability</li>
  <li>Transformation (translation of message between formats)</li>
  <li>"things usually get blurry - many solutions are both (message queue and message
    broker) - for example RabbitMQ or QDB.  Samples for message queues are
    Gearman, IronMQ, JMS, SQS or MSMQ."<br/>
    Message broker examples are, Qpid, Open AMQ or ActiveMQ.</li>
  <li>Kafka can also be used as message broker but is not its main intention</li>
  </ul>
</td>
<td>
  <b>Enterprise Service Bus (ESB)</b>
  Can be defined by next feautes:
  <ul xxxsmall zoom>
  <li>Monitoring of services/messages passed between them</li>
  <li>wire Protocol bridge between HTTP, AMQP, SOAP, gRPC, CVS in Filesystem,...</li>
  <li>Scheduling, mapping, QoS management, error handling, ..</li>
  <li>Data transformation</li>
  <li>Data pipelines</li>
  <li>Mule, JBoss Fuse (Camel + "etc..."), BizTalk, Apache ServiceMix, ...</li>
  <li>
<pre>
REF: https://en.wikipedia.org/wiki/Enterprise_service_bus#/media/File:ESB_Component_Hive.png
    ^   Special App. Services
    |
E   |   Process Automation                 BPEL, Workflow
n   |
t   |   Application Adapters               RFC, BABI, IDoc, XML-RPC, ...
e m |
r e |   Application Data Consolidation     MDM, OSCo, ...
p s |
r s |   Application Data Mapping           EDI, B2B
i a |   _______________________________
s g |   Business Application Monitoring
e e |   _______________________________
    |   Traffic Monitoring Cockpit
S c |
e h |   Special Message Services           Ex. Test Tools
r a |
v n |   Web Services                       WSDL, REST, CGI
i n |
c e |   Protocol Conversion                XML, XSL, DCOM, CORBA
e l |
    |   Message Consolidation              N.N (data locks, multi-submit,...)
B   |
u   |   Message Routing                    XI, WBI, BIZTALK, Seeburger
s   |
    |   Message Service                    MQ Series, MSMQ, ...
</pre>

  </li>
  </ul>
</td>
<td colsep></td>
<td>
   <a href="http://zgp.org/linux-tists/20040101205016.E5998@shaitan.lightconsulting.com.html">Interesting mail</a> "complaining" about the different cluster-filesystem solutions:
</td>
<td>
  <a href="http://ceph.com/ceph-storage/">Ceph</a>
<pre xxxsmall zoom>
Ceph’s RADOS provides you with extraordinary data storage  scalability—
thousands of client hosts or KVMs accessing petabytes to
exabytes of data. Each one of your applications can use the object, block or
file system interfaces to the same RADOS cluster simultaneously, which means
your Ceph storage system serves as a  flexible foundation for all of your
data storage needs. You can use Ceph for free, and deploy it on economical
commodity hardware. Ceph is a  better way to store data.

By decoupling the namespace from the underlying hardware, object-based
storage systems enable you to build much larger storage clusters. You
can scale out object-based storage systems using economical commodity hardware
, and you can replace hardware easily when it malfunctions or fails.

Ceph’s CRUSH algorithm liberates storage clusters from the scalability and
performance limitations imposed by centralized data table mapping. It
replicates and re-balance data within the cluster dynamically—elminating this
tedious task for administrators, while delivering high-performance and
infinite scalability.

See more at: http://ceph.com/ceph-storage/#sthash.KNp2tGf5.dpuf
</pre>
</td>
<td TODO>
  GlusterFS
</td>
<td>
  <a href="http://tachyon-project.org/index.html">Tachyon</a>
<pre xxxsmall zoom>
memory-centric distributed file system enabling reliable file sharing at memory-speed
across cluster frameworks, such as Spark and MapReduce. It achieves high performance by leveraging
lineage information and using memory aggressively. Tachyon caches working set files in memory,
thereby avoiding going to disk to load datasets that are frequently read. This enables different
jobs/queries and frameworks to access cached files at memory speed.

Tachyon is Hadoop compatible. Existing Spark and MapReduce programs can run on top of it without
any code change. The project is open source (Apache License 2.0) and is deployed at multiple companies.
It has more than 40 contributors from over 15 institutions, including Yahoo, Intel, and Redhat.

The project is the storage layer of the Berkeley Data Analytics Stack (BDAS) and also part of the
Fedora distribution.
</pre>
</td>
<td>
  <a href="http://xmodulo.com/2014/09/create-cloud-based-encrypted-file-system-linux.html">S3QL</a>
<pre xxxsmall zoom>
S3QL is one of the most popular open-source cloud-based file systems.  It is a FUSE-based file
system backed by several commercial or open-source cloud storages, such as Amazon S2,
Google Cloud Storage, Rackspace CloudFiles, or OpenStack.  As a full featured file system, S3QL boasts
of a number of powerful capabilities, such as unlimited capacity, up to 2TB file sizes,
compression, UNIX attributes, encryption, snapshots with copy-on-write, immutable trees,
de-duplication, hardlink/symlink support, etc.  Any bytes written to an S3QL file system are
compressed/encrypted locally before being transmitted to cloud backend.
When you attempt to read contents stored in an S3QL file system, the
corresponding objects are downloaded from cloud (if not in the local
cache), and decrypted/uncompressed on the fly.
</pre>
</td>


</tr>
</table>

<br/>
<hr/>
<br/>

<table>
<tr>
<th colspan=10 header_delimit xsmall >Example Architectures</th>
</tr>
<tr>
<td>
observability: login + monitoring + tracing

  Ex: (REF: <a href="https://www.rsaconference.com/writable/presentations/file_upload/csv-r14-fim-and-system-call-auditing-at-scale-in-a-large-container-deployment.pdf">File Integrity Monitoring at scale: (RSA Conf)</a>)<br/>
  Auditing log to gain insights at scale:
<pre xxxsmall zoom>
                         +→ Pagerduty
            +-→ Grafana -+→ Email
   Elastic  |            +→ Slack
   Search  -+-→ Kibana
            |
            +-→ Pre-processing  -> TensorFlow

Alt1:
  User   │ go-audit-                          User space
  land   │ container                             app
  ───────├─────  Netlink ───── Syscall iface ───────────
  Kernel │        socket           ^
         │          ^              |
                    └─  Kauditd ───┘
</pre>
</td>
</tr>
</table>


<table>
<tr>
  <th header_delimit colspan=10  xsmall >Continuous Integration</td>
</tr>
<tr>
<td>[CI]<a href="https://jenkins.io/doc/">Jenkins</a>
   <ul xxxsmall zoom>
   <li><a href="https://jenkins.io/solutions/pipeline/">Pipeline as Code</a></li>
   </ul>
</td>
<td>
  [CI]<a href="https://github.com/spinnaker/kayenta">Kayenta</a> Canary Testing
  <ul>
  <li>Kayenta is a platform for Automated Canary Analysis (ACA) </li>
  </ul>
</td>

</tr>
</table>

<br/>
</body>
</html>

<!--
TODO_start:
_________________________
DevOps Architecture:
  https://logz.io/blog/devops/
  Full list of CI tools
  https://xebialabs.com/technology/nevercode/
_________________________
CI/CD Tools:
  CI/CD - Jenkins, Maven, Nolio, Sonar, Jdepend, Selenium/fortify, TDD/BDD usage, Cucumber
  https://www.mediawiki.org/wiki/Continuous_integration

  https://www.mediawiki.org/wiki/Continuous_integration/Entry_points

  https://zuul-ci.org/

  https://www.mediawiki.org/wiki/Continuous_integration/Zuul
  """Zuul is a python daemon which acts as a gateway between Gerrit and Jenkins. It listens to Gerrit stream-events feed and trigger jobs function registered by Jenkins using the Jenkins Gearman plugin. The jobs triggering specification is written in YAML and hosted in the git repository integration/config.git as /zuul/layout.yaml . """


  CircleCI
__________________________
https://opensource.com/article/18/9/open-source-log-aggregation-tools?utm_medium=Email&utm_campaign=weekly&sc_cid=701f2000000RRBZAA4
____________________________

REF: https://www.infoq.com/news/2018/09/logdevice-distributed-logstorage
Facebook Open Sources LogDevice - a Distributed Data Store for Log Storage

LogDevice has been compared with other log storage systems like Apache BookKeeper and Apache Kafka. The primary difference with Kafka <a href="https://news.ycombinator.com/item?id=17975328">seems to be the decoupling of computation and storage</a> that LogDevice does to be able to handle Facebook's scale. LogDevice is written in C++ and hosted on GitHub.
The underlying storage is based on RocksDB, a key value store also open sourced by Facebook


_____________________
http://lucene.apache.org/solr/
Solr is the popular, blazing-fast, open source enterprise search platform built on Apache Lucene

________________
https://www.infoq.com/news/2018/10/Redis-5-Released
___________________________
http://camel.apache.org/manual/camel-manual-2.22.2.html#chapter-cook-book:
"""For example if you want to implement some kind of message passing, remoting, reliable load balancing or asynchronous processing in your application we recommend you use Camel annotations to bind your services and business logic to Camel Components which means you can then easily switch between things like

 *  in JVM messaging with SEDA
 *  using JMS via ActiveMQ or other JMS providers for reliable load balancing, grid or publish and subscribe
 *  for low volume, but easier administration since you're probably already using a database you could use
        Hibernate or JPA to use an entity bean / table as a queue
        iBatis to work with SQL
        JDBC for raw SQL access
 *  use JavaSpace
"""
___________________________
Business Activity Monitoring

The Camel BAM module provides a Business Activity Monitoring (BAM) framework for testing business processes across multiple message exchanges on different Endpoint instances.

Consider, for example, a simple system in which you submit Purchase Orders into system A and then receive Invoices from system B. You might want to test that, for a given Purchase Order, you receive a matching Invoice from system B within a specific time period.

______________________
Extract-Transform-Load Example
http://camel.apache.org/etl-example.html
_____________________
Mock Component

Testing Summary Include

The Mock component provides a powerful declarative testing mechanism, which is similar to jMock in that it allows declarative expectations to be created on any Mock endpoint before a test begins. Then the test is run, which typically fires messages to one or more endpoints, and finally the expectations can be asserted in a test case to ensure the system worked as expected.

This allows you to test various things like:

    The correct number of messages are received on each endpoint,
    The correct payloads are received, in the right order,
    Messages arrive on an endpoint in order, using some Expression to create an order testing function,
    Messages arrive match some kind of Predicate such as that specific headers have certain values, or that parts of the messages match some predicate, such as by evaluating an XPath or XQuery Expression.
_____________________
 What you need for microservices:
- Visibility and reporting
Resilence and fault tolerance
- Routing and traffic control
- Identity and secuiryt
- Policy enforcement.
_____________________
https://github.com/dexidp/dex

Dex is an identity service that uses OpenID Connect to drive authentication for other apps.

Dex acts as a portal to other identity providers through "connectors." This lets dex defer authentication to LDAP servers, SAML providers, or established identity providers like GitHub, Google, and Active Directory. Clients write their authentication logic once to talk to dex, then dex handles the protocols for a given backend.

______________________
https://prometheus.io/
________________
https://evolveum.com/midpoint/
  Why is midPoint the Best Identity Management and Identity Governance platform?
_____________________
More technologies
Nexus:
 - Component repository DDBB for Maven/Gradle, npm, NuGet, RubyGems, Docker, PyPI.
________________________
https://www.infoq.com/news/2019/02/metrics-logging-coinbase
_________________________
https://grafana.com/loki
_______________________________
https://www.reddit.com/r/linuxadmin/comments/apbjtc/freeipa_groups_and_linux_usernames/?utm_source=reddit-android
_______________________________
Nexenta: https://nexenta.com/
Nexenta® Software-Defined Storage Product Family.
___________________________
https://en.wikipedia.org/wiki/Data_lake
____________________________
https://news.ycombinator.com/item?id=1657574
____________________________
<!--
<td>
<pre xsmall zoom bgorange>
Tags:
[performance]
[redundancy]
[log]        Loggin
[monitoring]
[analytics]
[testing]
[CI]         Continuous Integration
[IaC]        Infrastructure as code

__________________________________

TODO: Classify [Software Architecture] How Events Are Reshaping Modern Systems
https://www.infoq.com/news/2017/11/jonas-reactive-summit-keynote
Jonas Boner on How Events Are Reshaping Modern Systems
Like | by Srini Penchikala on Nov 14, 2017. Estimated reading time: 1 minute

Jonas Boner, Founder & CTO at Lightbend, talked about event driven services and how event driven architectures (EDA) and event stream processing (ESP) technologies are helping with designing the modern applications based on distributed systems. He gave the keynote presentation at the recent Reactive Summit 2017 Conference.

Boner started the presentation with a background on how event driven systems evolved over time, using the examples of Tuxedo, Terracotta and Staged Event Driven Architecture (SEDA). It's important to know what it means to be event driven because events represent facts.

Events drive autonomy in the system as well as help reduce risk. They also increase loose coupling, scalability, resilience, and traceability. The event driven services approach basically inverts the control flow in the system which helps to minimize coupling and increase autonomy. Event driven solutions focus on the behavior of systems as opposed to the structure of systems.

He recommended developers to not focus on just the "things" in the system (Domain Objects), but rather focus on what happens (Events). He talked about the Promise Theory proposed by Mark Burgess and to use the events to define the Bounded Context through the lense of promises.

Boner also said that events allow us to manage time, and quoted Greg Young:

    Modeling events forces you to have a temporal focus on what’s going on in the system. Time becomes a crucial factor of the system.

Event Logging allows us to model time by treating event as a snapshot in time and event log as our full history. It also allows for time travel in the sense that we can replay the log for historic debugging as well as for auditing & traceability. We can replay it on system failures and for data replication.

Boner discussed the following patterns for event driven architecture:

    Event Loop
    Event Stream
    Event Sourcing
    CQRS for temporal decoupling
    Event Stream Processing

Event stream processing technologies like Apache Flink, Spark Streaming, Kafka Streams, Apache Gearpump and Apache Beam can be used to implement these design patterns.
___________________________
Zookeeper Internals:
https://zookeeper.apache.org/doc/r3.2.2/zookeeperInternals.html#sc_guaranteesPropertiesDefinitions
___________________________
https://loneidealist.wordpress.com/2017/07/12/apache-zookeeper-vs-etcd3/
_________________________
https://www.infoworld.com/article/3063161/why-redis-beats-memcached-for-caching.html
</pre>
</td>

-->

