<html>
   <meta charset="UTF-8">
   <title>Maven Map (v1.0)</title>
<head>
<script src="/IT_notes/map_v1.js"></script>
<link rel="stylesheet" type="text/css" href="/IT_notes/map_v1.css" />
</head>

<body onLoad='onPageLoaded()'>
<div id='zoomDiv'></div>
<div style="position:fixed; right:0.3%; bottom:0; width:auto;">
<b style="font-size:1.5rem" orange><a onclick="onZoomOut()">[-A]</a></b>
<b style="font-size:1.5rem"       >                                 </b>
<b style="font-size:2.0rem" orange><a onclick="onZoomIn ()">[A+]</a></b>
</div>
<!-- {{{ START }}} -->

<table>

</tr }>
<tr {>
  <td>
  <b>Building blocks</b><br/>
  GOAL
<pre xxxsmall zoom>
- unit of work. 
- A goal accepts configuration properties (parameters) to customize 
  its run-time behavior
- Ex: Compiler:compile defines a set of parameters to specify target
  JDK version or switching on/off compiler optimizations
  - An <b>ordered list</b> of goals can be attached to a <b blue>lifecycle phase</b>.
Ex:
                               Executes next goals in order
mvn <b blue>package</b>      | resources:resources → 
    ^Lifecicle  | compiler:compile → 
                | resources:testResources → 
                | compiler:testCompile →
                | surefire:test jar:jar
</pre>

  SNAPSHOTS
<pre xxxsmall zoom>
Q: What exactly is a Maven Snapshot and why do we need it?
A: <span xbig>A snapshot version is one that has not been released (<b orange>future release</b>)</span>.<br/>
   The idea is that <b>before</b> a "1.0" release is done, there exists
   a 1.0<b orange>-SNAPSHOT</b>. That version is what might become 1.0. It's
   basically <b orange>"1.0 under development"</b>. This might be close to a real
   1.0 release, or pretty far (right after the 0.9 release, for ex.)<br/>

   The difference between a "real" version and a snapshot version is
   that <b>snapshots might get updates</b>.  That means that downloading
   1.0-SNAPSHOT today might give a different file than downloading it
   yesterday or tomorrow.<br/>
   In contrast <b orange>Released versions are inmutables</b>:<br/>
   updates to "1.0.0" requires new version "1.0.1".<br/>
   <br/>
   Snapshot dependencies should only exist during development.
   <b>Released versions (i.e. no non-snapshot) should NEVER have a
   dependency on snapshots</b>

&lt;repository>
    ...
    &lt;snapshots>
        &lt;enabled>true&lt;/enabled>
        &lt;updatePolicy>
          always|daily(default)|
          "X"minutes|never
        &lt;/updatePolicy>
    &lt;/snapshots>
&lt;/repository>
</pre } >

  MAVEN DEFAULT LIFECYCLE
<pre xxxsmall zoom { >
process-resources
 compile
  process-classes
   process-test-resources
    test-compile
     test
      prepare-package
       package
        install
</pre } >
  </ul>
</td>
<td>
  Compiling/Installing
<pre xxxsmall zoom { >
$ mvn clean install
  ( clean>compile>test>package>install_local )
$ mvn clean install -Dmaven.test.skip=true # skip tests
  ( clean>compile>     package>install_local )
$ mvn clean deploy
  ( clean>compile>     package>install_local>install_pub )
-----------------------------------------------------------
Common options:
 –U  Force library (download) update
 –P xxx Execute profile xxx
 –o offline mode. Search deps in local repo.
-----------------------------------------------------------
help:active-profiles   : List (project|user|global)
                        active profile for the build
help:effective-pom     : Displays effective POM for
                          current build
help:effective-settings: Prints calculated settings 
help:describe groupId artifactId: Describes plugin attributes
</pre } >
   <br/>
   Managing dependencies
   <ul xxxsmall zoom >
   <li>
     <code xbig>$ mvn dependency:analyze</code> <br/>
     list two things:
     <ol>
       <li>Dependencies used but not declared.
           If found in the parent pom, there is no
           problem when compiling, but must be
           included at runtime on the server.
      </li>
      <li>Dependencies declared but not used for
          the scope provided (compile, provided…).
          They can be in the parent pom too.
          Noneless, can be needed at runtime.
      </li>
    </ol>
   </li>
   <li><code xbig>$ mvn dependency:tree</code></li>

</td>
<td>
  POM BEST PRACTICES:<a href='http://geertschuring.wordpress.com/2011/02/23/maven-best-practices/'>Ref</a>
  <ol xxxsmall zoom >
      <li>
   Replace references like ${artifactId} or ${pom.artifactId} with new
   ${project.artifactId} syntax. This syntax follows the XML document
   structure, making it easy to remember and predict the value that the
   reference will result in.
      </li>
      <li>
   Try to avoid using inherited properties. Developers can easily forget
   that a certain property is used by a child POM and change the value
   breaking the build in an unexpected place. Secondly, its quite annoying
   not to be able to easily lookup a property without having to find
   and examine the parent POM.
      </li>
      <li>
   Use the dependency management section of the parent pom to define
   all dependency versions, but do not set a scope here so that all
   dependencies have scope compile by default.
      </li>
      <li>
   Use properties to define the dependency versions. This way you can
   get an overview of all versions quickly.
      </li>
      <li>
   Use the pluginmanagement section of parent pom to define versions for
   *all* plugins that your build uses, even standard maven plugins like
   maven-compile-plugin and maven-source-plugin. This way your build will
   not suddenly behave differently when a new version of a plugin is released.
      </li>
      <li>
   When using a parent POM not located in the directory directly above
   the current POM define an empty relativePath element in your parent section.
      </li>
      <li>
   Use the dependency plugin to check your project for both unnecessary
   dependencies and undeclared-but-used-none-the-less dependencies.
   The goal is called ‘analyze’, so run the following command on the
   console: “mvn dependency:analyze
      </li>
      <li>
   Make sure the pom files contain all the repository references needed
   to download all dependencies. If you want to use a local repository
   instead of downloadin strait from the internet then use the maven
   settings file to define mirrors for the individual repositories that
   are defined in the poms.
      </li>
      <li>
   If you use Nexus, then do not create repository groups containing both
   hosted and proxied repositories. This will dramaticly reduce the
   responsiveness because Nexus will check the remote locations of the
   proxied repositories even if a hosted repository contains the requested
   artifact.  
      </li>
    </ol>
</td>
<td colsep>
</td>
</tr>
</table>
<table>
<tr {>
  <th header_delimit >Common tasks</th>
</tr }>
</table>
<table>
<tr {>
<td>
  New skeleton project:
  <ul xxxsmall zoom >
<pre { >
mvn archetype:generate -DgroupId=my.groupId \
   -DartifactId=myArtifact \
   -DarchetypeArtifactId=maven-archetype-quickstart \
   -DinteractiveMode=false
</pre } >
  
    Show ordered list of goals executed by a maven phase:<br/>
    Very useful to skip slow/non-important goals like doc, style-checks,...
<pre { >
$ mvn fr.jcgay.maven.plugins:buildplan-maven-plugin:list \
  -Dbuildplan.tasks=install
</pre } >
    Quick local install bypassing tests/style-checks/...
<pre { >
 $ mvn resources:resources \
       compiler:compile \
       jar:jar \
       install:install
</pre } >
</td>
<td>
    Add (tool generated) source directory
<pre xxxsmall zoom { >
&lt;build>
   ...
   &lt;sourceDirectory>
     src/main/generated_java
   &lt;/sourceDirectory>

   &lt;testDirectory>
     src/functionalTest/java
   &lt;/testDirectory>

&lt;/build>
</pre }>
</td>
<td colsep> </td>
<td>
  <a href="https://maven.apache.org/pom.html">pom.xml</a><br/>
<pre xxxsmall zoom>
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
  &lt;groupId&gt;com.everis&lt;/groupId&gt;
  &lt;artifactId&gt;insurancebc&lt;/artifactId&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;
  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
  &lt;name&gt;insurancebc&lt;/name&gt;
  &lt;url&gt;http://maven.apache.org&lt;/url&gt;
    &lt;properties&gt;
        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;
        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;
    &lt;/properties&gt;
  &lt;dependencies&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;junit&lt;/groupId&gt;
      &lt;artifactId&gt;junit&lt;/artifactId&gt;
      &lt;version&gt;3.8.1&lt;/version&gt;
      &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;com.google.guava&lt;/groupId&gt;
        &lt;artifactId&gt;guava&lt;/artifactId&gt;
        &lt;version&gt;21.0&lt;/version&gt;
    &lt;/dependency&gt;

&lt;!--
    &lt;dependency&gt;
        &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
        &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
        &lt;version&gt;1.7.21&lt;/version&gt;
    &lt;/dependency&gt;
--&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;
        &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;
        &lt;exclusions&gt;
            &lt;!-- Avoid problem:
            SLF4J: Class path contains multiple SLF4J bindings.
            SLF4J: Found binding in [jar:file:/home/azureuser/.m2/repository/org/slf4j/slf4j-jdk14/1.7.21/slf4j-jdk14-1.7.21.jar!/org/slf4j/impl/StaticLoggerBinder.class]
            SLF4J: Found binding in [jar:file:/home/azureuser/.m2/repository/ch/qos/logback/logback-classic/1.1.7/logback-classic-1.1.7.jar!/org/slf4j/impl/StaticLoggerBinder.class]
            --&gt;
            &lt;exclusion&gt;
                &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
                &lt;artifactId&gt;slf4j-jdk14&lt;/artifactId&gt;
            &lt;/exclusion&gt;
        &lt;/exclusions&gt;
        &lt;version&gt;1.1.7&lt;/version&gt;
    &lt;/dependency&gt;
    
    &lt;dependency&gt;
        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
        &lt;artifactId&gt;jackson-core&lt;/artifactId&gt;
        &lt;version&gt;2.8.8&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
        &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
        &lt;version&gt;2.9.0.pr3&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;
        &lt;artifactId&gt;jackson-datatype-joda&lt;/artifactId&gt;
        &lt;version&gt;2.8.8&lt;/version&gt;
    &lt;/dependency&gt; 
    
    &lt;dependency&gt;
        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
        &lt;artifactId&gt;scala-support&lt;/artifactId&gt;
        &lt;version&gt;3.0.6&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;io.rest-assured&lt;/groupId&gt;
        &lt;artifactId&gt;json-schema-validator&lt;/artifactId&gt;
        &lt;version&gt;3.0.6&lt;/version&gt;
        &lt;scope&gt;test&lt;/scope&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
        &lt;groupId&gt;org.web3j&lt;/groupId&gt;
        &lt;artifactId&gt;core&lt;/artifactId&gt;
        &lt;version&gt;3.2.0&lt;/version&gt;
    &lt;/dependency&gt;


  &lt;/dependencies&gt;
&lt;/project&gt;
</pre>
</td>
<td>
  parent / child pom relationship
<pre xxxsmall zoom { >
.../parent/pom.xml              | .../parent/child1/pom.xml

&lt;modelVersion>4.0.0             | &lt;parent>
&lt;/modelVersion>                 |   &lt;groupId>...&lt;/groupId>
&lt;groupId>....&lt;/groupId>         |   &lt;artifactId>parent&lt;/artifactId>
&lt;artifactId>parent&lt;/artifactId> |   &lt;version>1&lt;/version>
&lt;version>0.1.0&lt;/version>        |   &lt;relativePath>
&lt;packaging>pom&lt;/packaging>      |      ../pom.xml&lt;/relativePath>
                                | &lt;/parent>
                                | &lt;dependecies>
&lt;modules>                       |   &lt;dependency>
  &lt;module>./child1&lt;/module>     |     &lt;groupId>...&lt;/groupId>
  &lt;module>./child2&lt;/module>     |     &lt;artifactId>...&lt;/artifactId>
&lt;/modules>                      |   &lt;/dependency>...
                                | &lt;/dependecies>
&lt;dependencyManagement>          |
  &lt;dependencies>                |
  &lt;dependency>                  |
    &lt;groupId>...&lt;/groupId>      |
    &lt;artifactId>...&lt;/artifactId>| no need to repeat version/scope
    &lt;version>X.Y.Z&lt;/version>    | in childs
    &lt;scope>compile&lt;/scope>    &lt;-| compile | provided
  &lt;/dependency>...              |
  &lt;dependencies>                |
&lt;/dependencyManagement>
</pre } >
  Reuse constants:
  <ul xxxsmall zoom>
  <li><code>groupId / artifactId / version</code> values can be later reused  with
  <code>${project.groupId}/${project.artifactId}/${project.version}</code></li>
  <hr/>
  <li><a href="https://maven.apache.org/pom.html#Properties">properties</a> can also be reused anywhere in the POM with the <code>${my.property.name}</code> nomenclature.</li>
  </ul>
</pre } >
</td>
<td colsep> </td>
<td>
  Continuous Integration Best practices
  <a href="http://www.sonatype.com/people/2009/01/maven-continuous-integration-best-practices/">REF</a>
</td>
<td>
    <b>Others</b><br/>
    <a href="http://search.maven.org/">Artifact Search Engine</a>
    <hr xxxsmall />
    Install non-mavenized jar library:
<pre xxxsmall zoom { >
mvn install:install-file -Dfile=&lt;path to local file&gt; -DgroupId=&lt;groupIf&gt; \
   -DartifactId=&lt;artifactId&gt; -Dversion=&lt;version&gt; -Dpackaging=&lt;packaging&gt;
</pre } >
</td>
</tr }>
</table>
<br/>
Publishing to Maven Central:
<table>
<tr>
<td>
  <a href="http://maven.apache.org/repository/guide-central-repository-upload.html">
  Publishing artifacts to Maven central</a><br/>
  <a href="http://central.sonatype.org/pages/requirements.html">Requirements</a><br/>
<pre xxxsmall zoom>
NOTE: <b orange>Only releases allowed</b> (Not snapshots) 
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;project xmlns="http://maven.apache.org/POM/4.0.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="... http://.../maven-v4_0_0.xsd"&gt;
  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;groupId&gt;com.u1.training&lt;/groupId&gt;
  &lt;artifactId&gt;ossrh-demo&lt;/artifactId&gt;
  &lt;version&gt;1.0&lt;/version&gt;
  &lt;packaging&gt;jar&lt;/packaging&gt;

  &lt;name&gt;${project.groupId}:${project.artifactId}&lt;/name&gt;
  &lt;description&gt;demo deploy via OSSRH&lt;/description&gt;
  &lt;url&gt;http://github.com/u1/ossrh-demo&lt;/url&gt;

  &lt;licenses&gt;
    &lt;license&gt;
      &lt;name&gt;The Apache Software License, Version 2.0&lt;/name&gt;
      &lt;url&gt;http://www.apache.org/licenses/LICENSE-2.0.txt&lt;/url&gt;
    &lt;/license&gt;
  &lt;/licenses&gt;

  &lt;developers&gt;
    &lt;developer&gt;
      &lt;name&gt;Manfred Moser&lt;/name&gt;
      &lt;email&gt;manfred@sonatype.com&lt;/email&gt;
      &lt;organization&gt;Sonatype&lt;/organization&gt;
      &lt;organizationUrl&gt;
        http://www.sonatype.com
      &lt;/organizationUrl&gt;
    &lt;/developer&gt;
  &lt;/developers&gt;

  &lt;scm&gt;
    &lt;connection&gt;scm:git:git://github.com/u1/a.git&lt;/connection&gt;
    &lt;developerConnection&gt;
      scm:git:ssh://github.com:u1/a.git
    &lt;/developerConnection&gt;
    &lt;url&gt;http://github.com/u1/a/tree/master&lt;/url&gt;
   &lt;/scm&gt;

...

&lt;/project&gt;
</pre>

  <ul xxxsmall zoom>
  <li>All projects except pom-packaging ones have to supply <b orange>JAR files containing Javadoc and sources</b><br/>
   Supply Javadoc and Sources.  The naming convention is like: 
<pre>
"artifactId"-"version"-"classifier"."packaging"
Ex:
my-artifact-id-1.4.7-sources.jar
my-artifact-id-1.4.7-javadoc.jar
</pre>
</li>
  <li>All files need to be signed with GPG/PGP including the matching *.asc file. E.g. 
<pre>
example-application-1.4.7.pom          → example-application-1.4.7.pom.asc
example-application-1.4.7.jar          → example-application-1.4.7.jar.asc
example-application-1.4.7-sources.jar  → example-application-1.4.7-sources.jar.asc
example-application-1.4.7-javadoc.jar  → example-application-1.4.7-javadoc.jar.asc
</pre>
  </li>
  <li>we discourage the usage of &lt;repositories&gt; and &lt;pluginRepositories&gt; and instead publish any required components to the Central Repository</li>
  </ul>

  <a href="http://central.sonatype.org/pages/working-with-pgp-signatures.html ">PGP Signature</a>
  <ul xxxsmall zoom> 
  <li>Allow to validate artifact at download against a public key server</li> 
  <li>PGP signatures is required for artifacts (all files except checksums), 
    and matching public key uploaded to a server like  <a href="http://pgp.mit.edu">http://pgp.mit.edu</a>
  </li> 
  <li>
    <a TODO href="http://central.sonatype.org/pages/working-with-pgp-signatures.html#using-build-tools-for-signing">Build tool integration</a>
  </li> 
  </ul> 
</td>
<td>
  Publishing Best patterns
  <ul xxxsmall zoom> 
  <li>Use approved repository hosting location:
    <ul>
    <li><a href="http://www.apache.org/">Apache Software Foundation</a> (for all Apache projects)</li>
    <li><a href="http://www.fusesource.org/forge/">FuseSource Forge</a> (focused on FUSE related projects)</li>
    <li><a href="http://www.nuiton.org">Nuiton.org</a></li>
    </ul>
  </li> 
  <li>User automatic publication in "forges" that provide hosting services</li> 
  </ul> 


  <a href="http://central.sonatype.org/pages/ossrh-guide.html">OSS Repository Hosting</a>
  <ul xxxsmall zoom> 
  <li>Approved repository provided by Sonatype for OSS Project that want to 
    get their artifacts into Central Repository.</li>
  <li>Open an account as explained at <a href="http://central.sonatype.org/pages/ossrh-guide.html">OSS Repository Hosting</a></li>
  </ul>

  e-mail received after Namespace correct registration
<pre xxxsmall zoom>
[ <a href="https://issues.sonatype.org/browse/OSSRH-39644?page=com.atlassian.jira.plugin.system.issuetabpanels:all-tabpanel">Issue@Jira</a> ]
Thad Watson resolved OSSRH-39644: Resolution: Fixed

Configuration has been prepared, now you can:
* Deploy snapshot artifacts into repository
  <a href="https://oss.sonatype.org/content/repositories/snapshots">https://oss.sonatype.org/content/repositories/snapshots</a>

* Deploy release artifacts into the staging repository 
  <a href="https://oss.sonatype.org/service/local/staging/deploy/maven2">https://oss.sonatype.org/service/local/staging/deploy/maven2</a>
* Promote staged artifacts into repository 'Releases'
* Download snapshot and release artifacts from group 
  <a href="https://oss.sonatype.org/content/groups/public">https://oss.sonatype.org/content/groups/public</a>

* Download snapshot, release and staged artifacts from 
  staging group 
  <a href="https://oss.sonatype.org/content/groups/staging">https://oss.sonatype.org/content/groups/staging</a>
<b>please comment on this ticket when you promoted 
   your first release, thanks</b>
</pre>
  <a href="https://www.apache.org/dev/publishing-maven-artifacts.html#test-your-settings">Test settings</a>
  <ol xxxsmall zoom>
  <li>Make sure there are <strong>no dependencies on snapshots</strong> in the POMs to be released. 
     However, the project you want to stage must be a SNAPSHOT version</li>
  <li>Check that your POMs will not lose content when they are rewritten
     during the release process:</li>
  <li>Verify that all <em>pom.xml</em> files have an SCM definition</li>
  <li>Do a dryRun release: <code orange>mvn release:prepare -DdryRun=true</code>.<br/>
    Postcript: You may also wish to pass <code orange>-DautoVersionSubmodules=true</code>
    as this will save you time if your project is multi-moduled.
  </li>
  <li>Diff the original file <em>pom.xml</em> with the one called <em>pom.xml.tag</em> to
    see if the license or any other info has been removed. This has been known
    to happen if the starting <em>&lt;project&gt;</em> tag is <strong>not</strong> on a single
    line. The only things that should be different between these files are the
    <em>&lt;version&gt;</em> and <em>&lt;scm&gt;</em> elements. Any other changes you must
    backport yourself to the original <em>pom.xml</em> file and commit before
    proceeding with the release.</p>
  </li>
  </ol>
  <a href="https://www.apache.org/dev/publishing-maven-artifacts.html#publish-snapshot">Deploy(publish) snapshot</a>
<pre xxxsmall zoom>
  mvn deploy
  ...
  [INFO] [deploy:deploy]
  [INFO] Retrieving previous build number from apache.snapshots.https
  ...
</pre>
  <a href="https://www.apache.org/dev/publishing-maven-artifacts.html#prepare-release">Prepare release</a>
<pre xxxsmall zoom>
mvn release:clean
mvn release:prepare # creates new tag in SVN, automatically checking in.
</pre>
  <a href="https://www.apache.org/dev/publishing-maven-artifacts.html#stage-release-vote">Stage release for a vote</a>
<pre xxxsmall zoom>
mvn release:perform
# release will be automatically inserted in a temp staging dir
</pre>
  <a href="https://www.apache.org/dev/publishing-maven-artifacts.html#troubleshooting">Troubleshooting</a>
</td>
</tr } >
</table>


</body>
<!--

1.1	Ejecuciones multi-módulo (reactor de Maven)
Maven soporta tanto herencia como agregación de proyectos. La herencia se materializa estableciendo como padre de un proyecto a otro. La agregación (agrupación de proyectos), mediante el mecanismo que se conoce como "reactor".
El reactor es la parte del core de Maven que permite ejecutar un goal sobre un conjunto de proyectos. Mientras los módulos son unidades diferenciadas de trabajo, se puede hacer un build sobre un grupo de módulos mediante el reactor. El reactor determina el orden adecuado del build de los módulos basándose en las dependencias definidas en el pom de cada proyecto, y ejecuta una serie de goals sobre ellos. Se puede usar tanto para builds como para otros goals (por ejemplo, site generation).
Resumiendo, el reactor es lo que hace posible las ejecuciones maven multi-módulo: genera el grafo de dependencias entre módulos, obtiene de dicho grafo el orden de ejecución y ejecuta entonces los goals sobre los módulos. Se pueden utilizar indistintamente los términos "ejecución multi-módulo" y "ejecución reactor".
En Maven 2 se mejoró bastante el soporte de ejecuciones multi-módulo y el reactor se transformó en algo transparente a los usuarios de Maven. De cualquier forma, existe un plugin para personalizar la interacción con el reactor si así se desea: maven-reactor-plugin.


Si lanzamos la compilación de un multi-módulo (como AbsisParentPom) y falla, siempre podemos reanudar desde el último módulo que falló activando el flag --resume-from ó -rf, como en el siguiente ejemplo:
mvn --resume-from=es.lacaixa.absis:AbsisContext clean install -P OFI-COM -DskipTests=true
que es lo mismo que:
mvn -rf=es.lacaixa.absis:AbsisContext clean install -P OFI-COM -DskipTests=true
i



1.	Anexo I: Best Practices
Se incluyen algunas best practices recomendables para evitar problemas y facilitar el mantenimiento de los Poms.
1.1	Best Practices para mantenimiento de Poms
Sacados del artículo: http://geertschuring.wordpress.com/2011/02/23/maven-best-practices/
Estas son:
1.	Dont use deprecated references like ${artifactId} or ${pom.artifactId}. Use the new ${project.artifactId} syntax. Note that this syntax follows the XML document structure, which makes it easy to remember and predict the value that the reference will result in.
2.	Try to avoid using inherited properties. Developers can easily forget that a certain property is used by a child POM and change the value breaking the build in an unexpected place. Secondly, its quite annoying not to be able to easily lookup a property without having to find and examine the parent POM.
3.	Use the dependencymanagement section of the parent pom to define all dependency versions, but do not set a scope here so that all dependencies have scope compile by default.
4.	Use properties to define the dependency versions. This way you can get an overview of all versions being used without having to scroll through multiple pages of dependency sections.
5.	Use the pluginmanagement section of the parent pom to define versions for *all* plugins that your build uses, even standard maven plugins like maven-compile-plugin and maven-source-plugin. This way your build will not suddenly behave differently when a new version of a plugin is released.
6.	When using a parent POM that is not located in the directory directly above the current POM define an empty relativePath element in your parent section.
7.	Use the dependency plugin to check your project for both unnecessary dependencies and undeclared-but-used-none-the-less dependencies. The goal is called analyze, so run the following command on the console: mvn dependency:analyze
8.	Make sure the pom files contain all the repository references needed to download all dependencies. If you want to use a local repository instead of downloadin strait from the internet then use the maven settings file to define mirrors for the individual repositories that are defined in the poms.
9.	If you use Nexus, then do not create repository groups containing both hosted and proxied repositories. This will dramaticly reduce the responsiveness because Nexus will check the remote locations of the proxied repositories even if a hosted repository contains the requested artifact.
1.2	Best Practices de Sonatype para Integración  Continua
Son las best practices recomendadas por Sonatype para mantener un entorno estable y funcional de Integración Continua. Estan recogidas en la URL: 
http://www.sonatype.com/people/2009/01/maven-continuous-integration-best-practices/

#1 Automate Snapshot Deployment
In my experience, it is best to let your CI system deploy your snapshots. This is the most reliable way to guarantee that the contents of your repository are kept in sync with your source control system. In order to do this in a practical way, you need to couple CI with a repository manager like Nexus that can automatically purge snapshots. Ive managed projects that produced >300gb of snapshots in less than a week. Using a repository manager will save your sanity.

#2 Isolate Local Repostitories
Another critical component of a good CI setup is local repository isolation. The local repository in Maven is the temporary holding spot for all artifacts downloaded and produced by Maven, and it is not currently setup to be multi-process safe.   There is a remote possibility of a conflict, but it does exist.
The main reason I like to have a local repository per project is that its the only way to test that your project is build-able against the artifacts in the corporate repository. If you dont have separate local repos, then the product on one build will be seen by another build on CI, even if its not in the corporate repository. This is important since one function of CI should be to validate that the code is buildable by a real developer.
Tip: use -Dmaven.repo.local=xxxx to define the unique local repositories for each build.
#3 Regularly Purge Local Repositories
To further validate the contents of the repository, and to manage the disk space, I purge the local repostories every night. This way if changes in the repository or artifacts are removed, the CI system will detect this. To keep it easy to purge all the local repositories, I tend to structure them under a single common folder such as /opt/repos/*.
Obviously having many local repositories requires more disk space than a single monolitic one due to dependency duplication, but even on our large grid the repos are less than 10gb total. Local repos get giant when you dont control the snapshots and purging them nightly keeps this under control.
Tip: use your CI system itself to schedule the local repo cleanup. This way anyone can clean the repos manually right from the UI if Maven gets confused.

#4 Enable Batch Mode
Tip: Enable -B (batch) mode on the build. This will make the logs shorter since it avoids the dependency download progress logging. It also ensures that the build wont hang due to waiting for user input. (to enable globally in settings.xml:<interactiveMode>false</interactiveMode>)

#5 Enable Full Stack Traces
Tip: Enable -e to cause Maven to produce the full stack trace if theres a build exception. This will make it easier to comprehend any problems in the resulting build failure log/email without having to build it again.

#6 Print Test Failures to Standard Output
Tip: Enable -Dsurefire.useFile=false. This is a favorite of mine since this causes surefire to print test failures to standard out, where it will get included in the build failure log and email. This saves you from having to dig back onto the machine to find the surefire report just to see a simple stack trace. (to enable globally in settings.xml:<properties><surefire.useFile>true</surefire.useFile></properties> in an active profile)

#7 Always check for Snapshots
Tip: Enable -U to cause Maven to always check for new snapshots. (to enable globally in settings.xml: <updatePolicy>always</updatePolicy>.this goes on a repository definition) 

 
2.	 

Hay 3 lifecycle estándar definidos en Maven:
- clean: gestiona la limpieza del proyecto
- default (conocido como build lifecycle): gestiona la compilación, tests y deployment del proyecto
- site: gestiona la generación y despliegue del site de documentación del proyecto

i


Sentencia	Descripción
mvn clean	Borra la carpeta target
mvn compile	Compila el proyecto
mvn clean package	Compila y genera el JAR
mvn clean install	Compila y copia la librería en el repositorio LOCAL
mvn clean deploy	Compila y copia la librería en el repositorio CORPORATIVO
mvn[] U	Fuerza update de las librerías, descargándolas de nuevo
mvn[] P xxx	Ejecuta el profile xxx
mvn o []	Modo offline para que busque dependencias en repositorio local, estas deben tener el pom correctamente instalado
mvn[] -Dgenerate.pom=true	Genera el pom en local de un artefacto al instalarlo o compilarlo. MUY UTIL para que funcione modo OFFLINE


___________________
https://maven.apache.org/repository/guide-central-repository-upload.html
________________
Semantic versioning https://semver.org/
________________
Example packaging values are jar , war ,ear , pom , maven-plugin , ejb , rar , par , aar and apklib with other values being valid as well.
__________________
Repo manager https://help.sonatype.com/repomanager2 
_______________

-->
</html>
